import{r as o,s as E,j as e}from"./index-FRp6wVcD.js";import{S as de,T as ce}from"./TopBar-DS7MBlT5.js";import{a as S}from"./api-DesrtcF2.js";import{u as me}from"./usePermissions-YeN8SHyT.js";function ge(){const[_,B]=o.useState(!0),[f,G]=o.useState(!0),[x,J]=o.useState([]),[K,F]=o.useState(!0),[j,W]=o.useState(""),[D,H]=o.useState(""),[v,Q]=o.useState(""),[V,u]=o.useState(!1),[y,p]=o.useState(null),{canCreate:X,canEdit:L,canDelete:z}=me(),[a,i]=o.useState({nome:"",turno:"Manhã",especialidade:"",lider:"",membros:[],disponibilidade:!0,observacoes:""}),[N,M]=o.useState(""),Y=["Wagner","Ernando","Claudiney","Manuel","Jailson"],[Z,b]=o.useState(!1),[d,ee]=o.useState([]),[g,h]=o.useState(null),[t,n]=o.useState({nome:"",cargo:"",telefone:"",email:"",data_admissao:"",salario:0,foto_url:"",status:"ativo",equipe_id:""}),[se,T]=o.useState(!1),[c,w]=o.useState([]);o.useEffect(()=>{f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]),o.useEffect(()=>{q(),A()},[]);const q=async()=>{try{F(!0);const s=await S.getAll();J(s||[])}catch(s){console.error("Erro ao carregar equipes:",s)}finally{F(!1)}},A=async()=>{try{const{data:s,error:r}=await E.from("colaboradores").select("*").order("nome");!r&&s&&ee(s)}catch(s){console.error("Erro ao carregar colaboradores:",s)}},re=async s=>{s.preventDefault();try{y?await S.update(y.id,a):await S.create(a),u(!1),p(null),C(),q()}catch(r){console.error("Erro ao salvar equipe:",r),alert("Erro ao salvar equipe")}},ae=async s=>{s.preventDefault();try{const r={...t};if((!r.equipe_id||r.equipe_id==="")&&(r.equipe_id=null),g){const{error:l}=await E.from("colaboradores").update(r).eq("id",g.id);if(l)throw l}else{const{error:l}=await E.from("colaboradores").insert([r]);if(l)throw l}b(!1),h(null),k(),setTimeout(async()=>{await A(),alert(g?"Colaborador atualizado com sucesso!":"Colaborador cadastrado com sucesso!")},300)}catch(r){console.error("Erro ao salvar colaborador:",r),alert(`Erro ao salvar colaborador: ${r.message||"Erro desconhecido"}`)}},te=s=>{p(s),i({nome:s.nome,turno:s.turno||"Manhã",especialidade:s.especialidade||"",lider:s.lider||"",membros:s.membros||[],disponibilidade:s.disponibilidade,observacoes:s.observacoes||""}),u(!0)},le=async s=>{if(confirm("Tem certeza que deseja excluir esta equipe?"))try{await S.delete(s),q()}catch(r){console.error("Erro ao excluir equipe:",r),alert("Erro ao excluir equipe")}},oe=async s=>{if(confirm("Tem certeza que deseja excluir este colaborador?"))try{await E.from("colaboradores").delete().eq("id",s),A()}catch(r){console.error("Erro ao excluir colaborador:",r)}},C=()=>{i({nome:"",turno:"Manhã",especialidade:"",lider:"",membros:[],disponibilidade:!0,observacoes:""}),M("")},I=()=>{N.trim()&&!a.membros.includes(N.trim())&&(i({...a,membros:[...a.membros,N.trim()]}),M(""))},ie=()=>{const s=c.map(r=>{var l;return(l=d.find(m=>m.id===r))==null?void 0:l.nome}).filter(r=>r&&!a.membros.includes(r));i({...a,membros:[...a.membros,...s]}),w([]),T(!1)},ne=s=>{i({...a,membros:a.membros.filter(r=>r!==s)})},k=()=>{n({nome:"",cargo:"",telefone:"",email:"",data_admissao:"",salario:0,foto_url:"",status:"ativo",equipe_id:""})},$=s=>{switch(s){case"ativo":return"bg-green-100 text-green-800";case"inativo":return"bg-gray-100 text-gray-800";case"ferias":return"bg-blue-100 text-blue-800";case"afastado":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},O=x.filter(s=>{var R,U;const r=s.nome.toLowerCase().includes(j.toLowerCase())||((R=s.lider)==null?void 0:R.toLowerCase().includes(j.toLowerCase()))||((U=s.especialidade)==null?void 0:U.toLowerCase().includes(j.toLowerCase())),l=!D||s.turno===D,m=!v||v==="disponivel"&&s.disponibilidade||v==="indisponivel"&&!s.disponibilidade;return r&&l&&m}),P=["Manhã","Tarde","Noite","Integral"];return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(de,{isOpen:_,onToggle:()=>B(!_),darkMode:f}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${_?"ml-64":"ml-20"}`,children:[e.jsx(ce,{darkMode:f,setDarkMode:G}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:[e.jsx("i",{className:"ri-team-line mr-3"}),"Gestão de Equipes e Colaboradores"]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>{p(null),C(),u(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-team-line mr-2"}),"Nova Equipe"]}),e.jsxs("button",{onClick:()=>{h(null),k(),b(!0)},className:"px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Novo Colaborador"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Total de Equipes"}),e.jsx("i",{className:"ri-team-line text-2xl text-blue-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Colaboradores"}),e.jsx("i",{className:"ri-user-line text-2xl text-purple-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Ativos"}),e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.status==="ativo").length})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Disponíveis"}),e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(s=>s.disponibilidade).length})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Total de Membros"}),e.jsx("i",{className:"ri-group-line text-2xl text-orange-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.reduce((s,r)=>{var l;return s+(((l=r.membros)==null?void 0:l.length)||0)},0)})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:[e.jsx("i",{className:"ri-user-line mr-2"}),"Colaboradores Cadastrados"]}),d.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx("i",{className:"ri-user-line text-6xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum colaborador cadastrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Comece adicionando o primeiro colaborador da sua equipe"}),e.jsxs("button",{onClick:()=>{h(null),k(),b(!0)},className:"px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Adicionar Primeiro Colaborador"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex-shrink-0 overflow-hidden",children:s.foto_url?e.jsx("img",{src:s.foto_url,alt:s.nome,className:"w-12 h-12 object-cover rounded-full"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:s.nome.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.nome}),s.cargo&&e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.cargo})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("i",{className:"ri-mail-line flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.email})]}),s.telefone&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("i",{className:"ri-phone-line flex-shrink-0"}),e.jsx("span",{children:s.telefone})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{h(s),n({nome:s.nome,cargo:s.cargo||"",telefone:s.telefone||"",email:s.email||"",data_admissao:s.data_admissao||"",salario:s.salario||0,foto_url:s.foto_url||"",status:s.status,equipe_id:s.equipe_id||""}),b(!0)},className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer",title:"Editar",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>oe(s.id),className:"w-7 h-7 flex items-center justify-center text-red-600 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Equipes"})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Nome, líder...",value:j,onChange:s=>W(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turno"}),e.jsxs("select",{value:D,onChange:s=>H(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os turnos"}),P.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disponibilidade"}),e.jsxs("select",{value:v,onChange:s=>Q(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"disponivel",children:"Disponíveis"}),e.jsx("option",{value:"indisponivel",children:"Indisponíveis"})]})]}),X&&e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>{p(null),C(),u(!0)},className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-6 py-2 rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all duration-200 font-medium whitespace-nowrap flex items-center justify-center gap-2 cursor-pointer",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Equipe"]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K?e.jsx("div",{className:"col-span-full flex items-center justify-center py-12",children:e.jsx("i",{className:"ri-loader-4-line text-4xl text-gray-400 animate-spin"})}):O.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("i",{className:"ri-team-line text-6xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma equipe encontrada"})]}):O.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.nome}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.turno&&e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:s.turno}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${s.disponibilidade?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.disponibilidade?"Disponível":"Indisponível"})]})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[s.lider&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("i",{className:"ri-user-star-line text-lg"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Líder:"})," ",s.lider]})]}),s.especialidade&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("i",{className:"ri-tools-line text-lg"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Especialidade:"})," ",s.especialidade]})]}),s.membros&&s.membros.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx("i",{className:"ri-group-line text-lg"}),e.jsx("span",{children:e.jsxs("strong",{children:["Membros (",s.membros.length,"):"]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 ml-6",children:s.membros.map((r,l)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:r},l))})]})]}),s.observacoes&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Observações:"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.observacoes})]}),(L||z)&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-100",children:[L&&e.jsxs("button",{onClick:()=>te(s),className:"flex-1 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors font-medium whitespace-nowrap flex items-center justify-center gap-2 cursor-pointer",children:[e.jsx("i",{className:"ri-edit-line"}),"Editar"]}),z&&e.jsxs("button",{onClick:()=>le(s.id),className:"px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors font-medium whitespace-nowrap flex items-center justify-center gap-2 cursor-pointer",children:[e.jsx("i",{className:"ri-delete-bin-line"}),"Excluir"]})]})]},s.id))})]})]})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-600 p-6 rounded-t-2xl",children:e.jsx("h2",{className:"text-2xl font-bold text-white",children:y?"Editar Equipe":"Nova Equipe"})}),e.jsxs("form",{onSubmit:re,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Equipe *"}),e.jsx("input",{type:"text",value:a.nome,onChange:s=>i({...a,nome:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turno *"}),e.jsx("select",{value:a.turno,onChange:s=>i({...a,turno:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:P.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidade"}),e.jsx("input",{type:"text",value:a.especialidade,onChange:s=>i({...a,especialidade:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Líder da Equipe"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:Y.map(s=>e.jsx("button",{type:"button",onClick:()=>{i({...a,lider:s})},className:`px-3 py-1 rounded-full border ${a.lider===s?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"} hover:shadow-sm`,children:s},s))}),e.jsx("input",{type:"text",placeholder:"Outro (digite para sobrescrever)",value:a.lider,onChange:s=>i({...a,lider:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disponibilidade *"}),e.jsxs("select",{value:a.disponibilidade?"true":"false",onChange:s=>i({...a,disponibilidade:s.target.value==="true"}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"true",children:"Disponível"}),e.jsx("option",{value:"false",children:"Indisponível"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Membros da Equipe"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:N,onChange:s=>M(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),I()),placeholder:"Digite o nome e pressione Enter",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors whitespace-nowrap",children:e.jsx("i",{className:"ri-add-line"})}),e.jsx("button",{type:"button",onClick:()=>T(!0),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors whitespace-nowrap cursor-pointer",title:"Selecionar colaboradores cadastrados",children:e.jsx("i",{className:"ri-user-add-line"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.membros.map((s,r)=>e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm flex items-center gap-2",children:[s,e.jsx("button",{type:"button",onClick:()=>ne(s),className:"hover:text-blue-900",children:e.jsx("i",{className:"ri-close-line"})})]},r))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),e.jsx("textarea",{value:a.observacoes,onChange:s=>i({...a,observacoes:s.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),p(null),C()},className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all duration-200 font-medium whitespace-nowrap",children:y?"Atualizar":"Criar"})]})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-6 rounded-t-2xl",children:e.jsx("h2",{className:"text-2xl font-bold text-white",children:g?"Editar Colaborador":"Novo Colaborador"})}),e.jsxs("form",{onSubmit:ae,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:t.nome,onChange:s=>n({...t,nome:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto"}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.foto_url&&e.jsx("img",{src:t.foto_url,alt:"preview",className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("label",{className:"px-3 py-2 bg-gray-100 border rounded cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:s=>{var l;const r=(l=s.target.files)==null?void 0:l[0];if(r){const m=new FileReader;m.onloadend=()=>{n({...t,foto_url:m.result})},m.readAsDataURL(r)}}}),t.foto_url?"Alterar Foto":"Enviar Foto"]}),t.foto_url&&e.jsx("button",{type:"button",onClick:()=>n({...t,foto_url:""}),className:"text-sm text-red-600",children:"Remover"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cargo"}),e.jsx("input",{type:"text",value:t.cargo,onChange:s=>n({...t,cargo:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsxs("select",{value:t.status,onChange:s=>n({...t,status:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"ativo",children:"Ativo"}),e.jsx("option",{value:"inativo",children:"Inativo"}),e.jsx("option",{value:"ferias",children:"Férias"}),e.jsx("option",{value:"afastado",children:"Afastado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>n({...t,email:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:t.telefone,onChange:s=>n({...t,telefone:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Admissão"}),e.jsx("input",{type:"date",value:t.data_admissao,onChange:s=>n({...t,data_admissao:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salário (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:t.salario,onChange:s=>n({...t,salario:parseFloat(s.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipe"}),e.jsxs("select",{value:t.equipe_id,onChange:s=>n({...t,equipe_id:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Sem equipe"}),x.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{b(!1),h(null),k()},className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-700 transition-all duration-200 font-medium whitespace-nowrap",children:g?"Atualizar":"Criar"})]})]})]})}),se&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-6 rounded-t-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Selecionar Colaboradores"}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Marque os colaboradores que deseja adicionar à equipe"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-3 mb-6 max-h-96 overflow-y-auto",children:[d.filter(s=>s.status==="ativo").map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:r=>{r.target.checked?w([...c,s.id]):w(c.filter(l=>l!==s.id))},className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 cursor-pointer"}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold",children:s.nome.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.nome}),s.cargo&&e.jsx("p",{className:"text-sm text-gray-600",children:s.cargo})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]},s.id)),d.filter(s=>s.status==="ativo").length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-user-line text-5xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum colaborador ativo cadastrado"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{T(!1),w([])},className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:ie,disabled:c.length===0,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-700 transition-all duration-200 font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:["Adicionar ",c.length>0?`(${c.length})`:""]})]})]})]})})]})}export{ge as default};
//# sourceMappingURL=page-CQ9pgvzy.js.map
