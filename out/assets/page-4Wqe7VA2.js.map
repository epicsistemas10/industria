{"version":3,"file":"page-4Wqe7VA2.js","sources":["../../src/pages/mapa/page.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Sidebar from '../dashboard/components/Sidebar';\nimport TopBar from '../dashboard/components/TopBar';\nimport { supabase } from '../../lib/supabase';\n\ninterface Equipment {\n  id: string;\n  nome: string;\n  x: number;\n  y: number;\n  status: 'operacional' | 'manutencao' | 'parado' | 'alerta';\n  setor: string;\n  progresso?: number;\n  criticidade?: string;\n  fabricante?: string;\n  modelo?: string;\n}\n\ninterface Hotspot {\n  id: string;\n  equipamento_id: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  color?: string;\n  fontSize?: number;\n  icon?: string;\n}\n\nexport default function MapaPage() {\n  const navigate = useNavigate();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [darkMode, setDarkMode] = useState(true);\n  const [equipments, setEquipments] = useState<Equipment[]>([]);\n  const [hotspots, setHotspots] = useState<Hotspot[]>([]);\n  const [selectedEquipment, setSelectedEquipment] = useState<Equipment | null>(null);\n  const [filterStatus, setFilterStatus] = useState<string>('todos');\n  const [filterSetor, setFilterSetor] = useState<string>('todos');\n  const [setores, setSetores] = useState<string[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [mapImage, setMapImage] = useState<string>('');\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [selectedHotspot, setSelectedHotspot] = useState<string | null>(null);\n  const [dragging, setDragging] = useState(false);\n  const [resizing, setResizing] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [showAddHotspot, setShowAddHotspot] = useState(false);\n  const [selectedEquipmentForHotspot, setSelectedEquipmentForHotspot] = useState<string>('');\n  const [equipmentDetails, setEquipmentDetails] = useState<any>(null);\n  const [loadingDetails, setLoadingDetails] = useState(false);\n  const [showCustomizePanel, setShowCustomizePanel] = useState(false);\n  const [hotspotColor, setHotspotColor] = useState('#10b981');\n  const [hotspotFontSize, setHotspotFontSize] = useState(14);\n  const [hotspotIcon, setHotspotIcon] = useState('ri-tools-fill');\n  const mapRef = useRef<HTMLDivElement>(null);\n  const [showServiceModal, setShowServiceModal] = useState(false);\n  const [serviceName, setServiceName] = useState('');\n  const [serviceDesc, setServiceDesc] = useState('');\n  const [selectedEquipmentsForService, setSelectedEquipmentsForService] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (darkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [darkMode]);\n\n  useEffect(() => {\n    loadEquipments();\n    loadSetores();\n    loadHotspots();\n    \n    const savedImage = localStorage.getItem('map_image');\n    if (savedImage) setMapImage(savedImage);\n    \n    const interval = setInterval(() => {\n      loadEquipments();\n      loadHotspots();\n    }, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const loadSetores = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('setores')\n        .select('nome')\n        .order('nome');\n\n      if (error) throw error;\n      if (data) {\n        setSetores(data.map(s => s.nome));\n      }\n    } catch (err) {\n      console.error('Erro ao carregar setores:', err);\n    }\n  };\n\n  const loadEquipments = async () => {\n    try {\n      setLoading(true);\n      \n      const { data: eqData, error: eqError } = await supabase\n        .from('equipamentos')\n        .select('*, setores(nome)');\n\n      if (!eqError && eqData && eqData.length > 0) {\n        const mapped = eqData.map((item) => ({\n          id: item.id,\n          nome: item.nome || 'Sem nome',\n          x: 0,\n          y: 0,\n          status: item.status_revisao >= 100 ? 'operacional' : \n                 item.status_revisao >= 50 ? 'manutencao' : \n                 item.status_revisao > 0 ? 'alerta' : 'parado',\n          setor: item.setores?.nome || 'Sem setor',\n          progresso: item.status_revisao || 0,\n          criticidade: item.criticidade,\n          fabricante: item.fabricante,\n          modelo: item.modelo,\n        }));\n        setEquipments(mapped);\n      } else {\n        setEquipments([]);\n      }\n    } catch (err) {\n      console.error('Erro ao carregar equipamentos:', err);\n      setEquipments([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadHotspots = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('equipamento_mapa')\n        .select('*');\n\n      if (!error && data) {\n        const hotspotsData = data.map(item => ({\n          id: item.id,\n          equipamento_id: item.equipamento_id,\n          x: item.x || 10,\n          y: item.y || 10,\n          width: item.width || 8,\n          height: item.height || 8,\n          color: item.color || '#10b981',\n          fontSize: item.font_size || 14,\n          icon: item.icon || 'ri-tools-fill',\n        }));\n        setHotspots(hotspotsData);\n      }\n    } catch (err) {\n      console.error('Erro ao carregar hotspots:', err);\n    }\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const result = reader.result as string;\n        setMapImage(result);\n        localStorage.setItem('map_image', result);\n        setShowImageUpload(false);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleAddHotspot = async () => {\n    if (!selectedEquipmentForHotspot) return;\n\n    try {\n      // Verificar se já existe hotspot para este equipamento\n      const { data: existingHotspot } = await supabase\n        .from('equipamento_mapa')\n        .select('id')\n        .eq('equipamento_id', selectedEquipmentForHotspot)\n        .single();\n\n      if (existingHotspot) {\n        alert('Este equipamento já possui um hotspot no mapa!');\n        return;\n      }\n\n      // Inserir novo hotspot\n      const { error } = await supabase\n        .from('equipamento_mapa')\n        .insert({\n          equipamento_id: selectedEquipmentForHotspot,\n          x: 20,\n          y: 20,\n          width: 8,\n          height: 8,\n        });\n\n      if (error) {\n        console.error('Erro ao inserir hotspot:', error);\n        throw error;\n      }\n\n      // Recarregar hotspots\n      await loadHotspots();\n      setShowAddHotspot(false);\n      setSelectedEquipmentForHotspot('');\n      \n      // Mostrar mensagem de sucesso\n      alert('Hotspot adicionado com sucesso! Agora você pode arrastá-lo para a posição correta.');\n    } catch (err: any) {\n      console.error('Erro ao adicionar hotspot:', err);\n      alert(`Erro ao adicionar hotspot: ${err.message || 'Erro desconhecido'}`);\n    }\n  };\n\n  const handleMouseDown = (e: React.MouseEvent, hotspotId: string, isResize: boolean = false) => {\n    if (!editMode) return;\n    \n    e.stopPropagation();\n    setSelectedHotspot(hotspotId);\n    \n    if (isResize) {\n      setResizing(true);\n    } else {\n      setDragging(true);\n    }\n    \n    setDragStart({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!editMode || !selectedHotspot || (!dragging && !resizing)) return;\n\n    const hotspot = hotspots.find(h => h.id === selectedHotspot);\n    if (!hotspot || !mapRef.current) return;\n\n    const rect = mapRef.current.getBoundingClientRect();\n    const deltaX = ((e.clientX - dragStart.x) / rect.width) * 100;\n    const deltaY = ((e.clientY - dragStart.y) / rect.height) * 100;\n\n    const updatedHotspots = hotspots.map(h => {\n      if (h.id === selectedHotspot) {\n        if (dragging) {\n          return {\n            ...h,\n            x: Math.max(0, Math.min(100 - h.width, h.x + deltaX)),\n            y: Math.max(0, Math.min(100 - h.height, h.y + deltaY)),\n          };\n        } else if (resizing) {\n          return {\n            ...h,\n            width: Math.max(5, Math.min(50, h.width + deltaX)),\n            height: Math.max(5, Math.min(50, h.height + deltaY)),\n          };\n        }\n      }\n      return h;\n    });\n\n    setHotspots(updatedHotspots);\n    setDragStart({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleMouseUp = async () => {\n    if (selectedHotspot && (dragging || resizing)) {\n      const hotspot = hotspots.find(h => h.id === selectedHotspot);\n      if (hotspot) {\n        try {\n          const { error } = await supabase\n            .from('equipamento_mapa')\n            .update({\n              x: hotspot.x,\n              y: hotspot.y,\n              width: hotspot.width,\n              height: hotspot.height,\n              color: hotspot.color,\n              font_size: hotspot.fontSize,\n              icon: hotspot.icon,\n            })\n            .eq('id', hotspot.id);\n          \n          if (error) {\n            console.error('Erro ao salvar posição:', error);\n            alert('Erro ao salvar posição do hotspot');\n          } else {\n            console.log('Hotspot salvo com sucesso:', hotspot);\n          }\n        } catch (err) {\n          console.error('Erro ao salvar posição:', err);\n          alert('Erro ao salvar posição do hotspot');\n        }\n      }\n    }\n    \n    setDragging(false);\n    setResizing(false);\n  };\n\n  const handleDeleteHotspot = async (hotspotId: string) => {\n    if (!confirm('Deseja remover este hotspot?')) return;\n\n    try {\n      await supabase\n        .from('equipamento_mapa')\n        .delete()\n        .eq('id', hotspotId);\n\n      await loadHotspots();\n      setSelectedHotspot(null);\n    } catch (err) {\n      console.error('Erro ao deletar hotspot:', err);\n    }\n  };\n\n  const loadEquipmentDetails = async (equipmentId: string) => {\n    setLoadingDetails(true);\n    try {\n      // Buscar dados do equipamento\n      const { data: eqData } = await supabase\n        .from('equipamentos')\n        .select('*, setores(nome)')\n        .eq('id', equipmentId)\n        .single();\n\n      // Buscar componentes\n      const { data: compData } = await supabase\n        .from('equipamentos_componentes')\n        .select('*, componentes(*)')\n        .eq('equipamento_id', equipmentId);\n\n      // Buscar histórico de manutenção\n      const { data: histData } = await supabase\n        .from('historico_revisoes')\n        .select('*')\n        .eq('equipamento_id', equipmentId)\n        .order('data_revisao', { ascending: false })\n        .limit(5);\n\n      // Buscar OS\n      const { data: osData } = await supabase\n        .from('ordens_servico')\n        .select('*')\n        .eq('equipamento_id', equipmentId)\n        .order('created_at', { ascending: false })\n        .limit(5);\n\n      // Buscar custos\n      const { data: custosData } = await supabase\n        .from('custos')\n        .select('*')\n        .eq('equipamento_id', equipmentId);\n\n      const totalCustos = custosData?.reduce((sum, c) => sum + (c.valor || 0), 0) || 0;\n\n      setEquipmentDetails({\n        ...eqData,\n        componentes: compData || [],\n        historico: histData || [],\n        ordens_servico: osData || [],\n        custo_total: totalCustos,\n      });\n    } catch (err) {\n      console.error('Erro ao carregar detalhes:', err);\n    } finally {\n      setLoadingDetails(false);\n    }\n  };\n\n  // Service modal actions: allow creating a service and assigning it to multiple equipments\n  const openServiceModalForSelected = () => {\n    if (selectedEquipment) {\n      setSelectedEquipmentsForService([selectedEquipment.id]);\n    } else {\n      setSelectedEquipmentsForService([]);\n    }\n    setServiceName('');\n    setServiceDesc('');\n    setShowServiceModal(true);\n  };\n\n  const handleSubmitService = async () => {\n    if (!serviceName || selectedEquipmentsForService.length === 0) {\n      alert('Informe o nome do serviço e selecione pelo menos um equipamento.');\n      return;\n    }\n\n    try {\n      const rows = selectedEquipmentsForService.map((equipId) => ({\n        equipamento_id: equipId,\n        nome: serviceName,\n        descricao: serviceDesc || null,\n      }));\n\n      const { data, error } = await supabase\n        .from('equipamento_servicos')\n        .insert(rows)\n        .select();\n\n      if (error) {\n        console.error('Erro ao criar serviços:', error);\n        alert('Erro ao cadastrar serviço. Veja console para detalhes.');\n        return;\n      }\n\n      alert('Serviço(s) cadastrado(s) com sucesso!');\n      setShowServiceModal(false);\n      // reload details for the selected equipment\n      if (selectedEquipment) await loadEquipmentDetails(selectedEquipment.id);\n    } catch (err) {\n      console.error('Erro ao cadastrar serviço:', err);\n      alert('Erro ao cadastrar serviço.');\n    }\n  };\n\n  const handleHotspotClick = async (hotspot: Hotspot) => {\n    if (editMode) return;\n    \n    const equipment = equipments.find(eq => eq.id === hotspot.equipamento_id);\n    if (equipment) {\n      setSelectedEquipment(equipment);\n      await loadEquipmentDetails(hotspot.equipamento_id);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'operacional': return '#10b981';\n      case 'manutencao': return '#f59e0b';\n      case 'parado': return '#ef4444';\n      case 'alerta': return '#eab308';\n      default: return '#6b7280';\n    }\n  };\n\n  const getFilteredHotspots = () => {\n    return hotspots.filter((hotspot) => {\n      const equipment = equipments.find(eq => eq.id === hotspot.equipamento_id);\n      if (!equipment) return false;\n      \n      const statusMatch = filterStatus === 'todos' || equipment.status === filterStatus;\n      const setorMatch = filterSetor === 'todos' || equipment.setor === filterSetor;\n      return statusMatch && setorMatch;\n    });\n  };\n\n  const statusLabels: Record<string, string> = {\n    operacional: 'Operacional',\n    manutencao: 'Manutenção',\n    parado: 'Parado',\n    alerta: 'Alerta',\n  };\n\n  const filteredCount = getFilteredHotspots().length;\n\n  const handleCustomizeHotspot = () => {\n    if (!selectedHotspot) return;\n    \n    const hotspot = hotspots.find(h => h.id === selectedHotspot);\n    if (hotspot) {\n      setHotspotColor(hotspot.color || '#10b981');\n      setHotspotFontSize(hotspot.fontSize || 14);\n      setHotspotIcon(hotspot.icon || 'ri-tools-fill');\n      setShowCustomizePanel(true);\n    }\n  };\n\n  const applyCustomization = async () => {\n    if (!selectedHotspot) return;\n\n    const hotspot = hotspots.find(h => h.id === selectedHotspot);\n    if (!hotspot) return;\n\n    const updatedHotspots = hotspots.map(h => {\n      if (h.id === selectedHotspot) {\n        return {\n          ...h,\n          color: hotspotColor,\n          fontSize: hotspotFontSize,\n          icon: hotspotIcon,\n        };\n      }\n      return h;\n    });\n\n    setHotspots(updatedHotspots);\n\n    try {\n      const { error } = await supabase\n        .from('equipamento_mapa')\n        .update({\n          color: hotspotColor,\n          font_size: hotspotFontSize,\n          icon: hotspotIcon,\n        })\n        .eq('id', selectedHotspot);\n      \n      if (error) {\n        console.error('Erro ao salvar customização:', error);\n        alert('Erro ao salvar customização');\n      } else {\n        console.log('Customização salva com sucesso');\n        setShowCustomizePanel(false);\n        // Recarregar hotspots para garantir sincronização\n        await loadHotspots();\n      }\n    } catch (err) {\n      console.error('Erro ao salvar customização:', err);\n      alert('Erro ao salvar customização');\n    }\n  };\n\n  const handleSizeChange = async (delta: number) => {\n    if (!selectedHotspot) return;\n\n    const hotspot = hotspots.find(h => h.id === selectedHotspot);\n    if (!hotspot) return;\n\n    const newWidth = Math.max(3, Math.min(30, hotspot.width + delta));\n    const newHeight = Math.max(3, Math.min(30, hotspot.height + delta));\n\n    const updatedHotspots = hotspots.map(h => {\n      if (h.id === selectedHotspot) {\n        return {\n          ...h,\n          width: newWidth,\n          height: newHeight,\n        };\n      }\n      return h;\n    });\n\n    setHotspots(updatedHotspots);\n\n    // Salvar imediatamente\n    try {\n      const { error } = await supabase\n        .from('equipamento_mapa')\n        .update({\n          width: newWidth,\n          height: newHeight,\n        })\n        .eq('id', selectedHotspot);\n      \n      if (error) {\n        console.error('Erro ao salvar tamanho:', error);\n        alert('Erro ao salvar tamanho');\n      } else {\n        console.log('Tamanho salvo com sucesso');\n      }\n    } catch (err) {\n      console.error('Erro ao salvar tamanho:', err);\n      alert('Erro ao salvar tamanho');\n    }\n  };\n\n  const handleCircleSizeChange = async (delta: number) => {\n    if (!selectedHotspot) return;\n\n    const hotspot = hotspots.find(h => h.id === selectedHotspot);\n    if (!hotspot) return;\n\n    const newFontSize = Math.max(8, Math.min(20, (hotspot.fontSize || 14) + delta));\n\n    const updatedHotspots = hotspots.map(h => {\n      if (h.id === selectedHotspot) {\n        return {\n          ...h,\n          fontSize: newFontSize,\n        };\n      }\n      return h;\n    });\n\n    setHotspots(updatedHotspots);\n\n    // Salvar imediatamente\n    try {\n      const { error } = await supabase\n        .from('equipamento_mapa')\n        .update({\n          font_size: newFontSize,\n        })\n        .eq('id', selectedHotspot);\n      \n      if (error) {\n        console.error('Erro ao salvar tamanho da fonte:', error);\n        alert('Erro ao salvar tamanho da fonte');\n      } else {\n        console.log('Tamanho da fonte salvo com sucesso');\n      }\n    } catch (err) {\n      console.error('Erro ao salvar tamanho da fonte:', err);\n      alert('Erro ao salvar tamanho da fonte');\n    }\n  };\n\n  const handleSaveAndExit = async () => {\n    // Salvar todos os hotspots antes de sair do modo edição\n    try {\n      const savePromises = hotspots.map(async (hotspot) => {\n        const { error } = await supabase\n          .from('equipamento_mapa')\n          .update({\n            x: hotspot.x,\n            y: hotspot.y,\n            width: hotspot.width,\n            height: hotspot.height,\n            color: hotspot.color,\n            font_size: hotspot.fontSize,\n            icon: hotspot.icon,\n          })\n          .eq('id', hotspot.id);\n        \n        if (error) {\n          console.error('Erro ao salvar hotspot:', hotspot.id, error);\n          throw error;\n        }\n        return true;\n      });\n\n      await Promise.all(savePromises);\n      \n      console.log('Todos os hotspots salvos com sucesso');\n      \n      // Recarregar hotspots para garantir sincronização\n      await loadHotspots();\n      \n      setEditMode(false);\n      setSelectedHotspot(null);\n      \n      alert('Alterações salvas com sucesso!');\n    } catch (err) {\n      console.error('Erro ao salvar hotspots:', err);\n      alert('Erro ao salvar as alterações. Tente novamente.');\n    }\n  };\n\n  return (\n    <div className={`min-h-screen ${darkMode ? 'bg-slate-900' : 'bg-gray-100'} transition-colors duration-300`}>\n      <Sidebar isOpen={sidebarOpen} onToggle={() => setSidebarOpen(!sidebarOpen)} darkMode={darkMode} />\n\n      <div className={`transition-all duration-300 ${sidebarOpen ? 'ml-64' : 'ml-20'}`}>\n        <TopBar darkMode={darkMode} setDarkMode={setDarkMode} />\n\n        <main className=\"p-6\">\n          {/* Header */}\n          <div className=\"mb-6 flex items-center justify-between flex-wrap gap-4\">\n            <div>\n              <h1 className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                Mapa Industrial Interativo\n              </h1>\n              <p className={`mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Visualização em tempo real dos equipamentos • {filteredCount} equipamentos exibidos\n              </p>\n            </div>\n\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <button\n                onClick={editMode ? handleSaveAndExit : () => setEditMode(true)}\n                className={`px-4 py-2 rounded-lg transition-all whitespace-nowrap cursor-pointer ${\n                  editMode \n                    ? 'bg-red-600 text-white hover:bg-red-700' \n                    : 'bg-blue-600 text-white hover:bg-blue-700'\n                }`}\n              >\n                <i className={`${editMode ? 'ri-save-line' : 'ri-edit-line'} mr-2`}></i>\n                {editMode ? 'Salvar e Sair' : 'Modo Edição'}\n              </button>\n\n              {editMode && (\n                <>\n                  <button\n                    onClick={() => setShowAddHotspot(true)}\n                    className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all whitespace-nowrap cursor-pointer\"\n                  >\n                    <i className=\"ri-add-line mr-2\"></i>\n                    Adicionar Hotspot\n                  </button>\n\n                  {selectedHotspot && (\n                    <>\n                      <button\n                        onClick={handleCustomizeHotspot}\n                        className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all whitespace-nowrap cursor-pointer\"\n                      >\n                        <i className=\"ri-palette-line mr-2\"></i>\n                        Personalizar\n                      </button>\n\n                      <div className=\"flex items-center gap-2 bg-slate-800 rounded-lg px-3 py-2\">\n                        <button\n                          onClick={() => handleSizeChange(-1)}\n                          className=\"w-8 h-8 flex items-center justify-center bg-slate-700 text-white rounded hover:bg-slate-600 cursor-pointer\"\n                          title=\"Diminuir área do hotspot\"\n                        >\n                          <i className=\"ri-subtract-line\"></i>\n                        </button>\n                        <span className=\"text-white text-sm px-2\">Área</span>\n                        <button\n                          onClick={() => handleSizeChange(1)}\n                          className=\"w-8 h-8 flex items-center justify-center bg-slate-700 text-white rounded hover:bg-slate-600 cursor-pointer\"\n                          title=\"Aumentar área do hotspot\"\n                        >\n                          <i className=\"ri-add-line\"></i>\n                        </button>\n                      </div>\n\n                      <div className=\"flex items-center gap-2 bg-slate-800 rounded-lg px-3 py-2\">\n                        <button\n                          onClick={() => handleCircleSizeChange(-2)}\n                          className=\"w-8 h-8 flex items-center justify-center bg-slate-700 text-white rounded hover:bg-slate-600 cursor-pointer\"\n                          title=\"Diminuir círculo\"\n                        >\n                          <i className=\"ri-subtract-line\"></i>\n                        </button>\n                        <span className=\"text-white text-sm px-2\">Círculo</span>\n                        <button\n                          onClick={() => handleCircleSizeChange(2)}\n                          className=\"w-8 h-8 flex items-center justify-center bg-slate-700 text-white rounded hover:bg-slate-600 cursor-pointer\"\n                          title=\"Aumentar círculo\"\n                        >\n                          <i className=\"ri-add-line\"></i>\n                        </button>\n                      </div>\n                    </>\n                  )}\n                </>\n              )}\n\n              <button\n                onClick={() => setShowImageUpload(true)}\n                className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all whitespace-nowrap cursor-pointer\"\n              >\n                <i className=\"ri-image-add-line mr-2\"></i>\n                Alterar Imagem\n              </button>\n\n              <select\n                value={filterStatus}\n                onChange={(e) => setFilterStatus(e.target.value)}\n                className={`px-4 py-2 pr-8 rounded-lg border ${\n                  darkMode \n                    ? 'bg-slate-800 border-slate-700 text-white' \n                    : 'bg-white border-gray-300 text-gray-900'\n                } focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer`}\n              >\n                <option value=\"todos\">Todos os Status</option>\n                <option value=\"operacional\">Operacional</option>\n                <option value=\"manutencao\">Manutenção</option>\n                <option value=\"parado\">Parado</option>\n                <option value=\"alerta\">Alerta</option>\n              </select>\n\n              <select\n                value={filterSetor}\n                onChange={(e) => setFilterSetor(e.target.value)}\n                className={`px-4 py-2 pr-8 rounded-lg border ${\n                  darkMode \n                    ? 'bg-slate-800 border-slate-700 text-white' \n                    : 'bg-white border-gray-300 text-gray-900'\n                } focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer`}\n              >\n                <option value=\"todos\">Todos os Setores</option>\n                {setores.map((setor) => (\n                  <option key={setor} value={setor}>{setor}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {/* Legend removed as requested */}\n\n          {/* Loading */}\n          {loading && (\n            <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-slate-800' : 'bg-white'} shadow-xl flex items-center justify-center`} style={{ height: 'calc(100vh - 200px)' }}>\n              <div className=\"text-center\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n                <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Carregando mapa...</p>\n              </div>\n            </div>\n          )}\n\n          {/* Mapa Interativo - TELA CHEIA */}\n          {!loading && (\n            <div \n              ref={mapRef}\n              className={`rounded-xl overflow-hidden ${darkMode ? 'bg-slate-800' : 'bg-white'} shadow-xl relative ${editMode ? 'cursor-crosshair' : 'cursor-default'}`} \n              style={{ height: 'calc(100vh - 200px)' }}\n              onMouseMove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n              onMouseLeave={handleMouseUp}\n            >\n              {mapImage ? (\n                <img \n                  src={mapImage} \n                  alt=\"Mapa Industrial\" \n                  className=\"w-full h-full object-cover pointer-events-none\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center bg-slate-700/30\">\n                  <div className=\"text-center\">\n                    <i className=\"ri-map-pin-line text-5xl text-gray-400 mb-3\"></i>\n                    <p className=\"text-gray-300\">Nenhuma imagem do mapa. Faça upload em \"Alterar Imagem\".</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Hotspots Overlay */}\n              {getFilteredHotspots().map((hotspot) => {\n                const equipment = equipments.find(eq => eq.id === hotspot.equipamento_id);\n                if (!equipment) return null;\n\n                const hotspotColor = hotspot.color || getStatusColor(equipment.status);\n                const fontSize = hotspot.fontSize || 14;\n                const iconClass = hotspot.icon || 'ri-tools-fill';\n                const circleSize = fontSize * 4;\n\n                return (\n                  <div\n                    key={hotspot.id}\n                    className={`absolute group ${editMode ? 'cursor-move' : 'cursor-pointer'} ${\n                      selectedHotspot === hotspot.id ? 'ring-4 ring-blue-500' : ''\n                    }`}\n                    style={{ \n                      left: `${hotspot.x}%`, \n                      top: `${hotspot.y}%`,\n                      width: `${hotspot.width}%`,\n                      height: `${hotspot.height}%`,\n                      backgroundColor: editMode ? 'rgba(59, 130, 246, 0.3)' : 'transparent',\n                      border: editMode ? '2px dashed #3b82f6' : 'none',\n                    }}\n                    onMouseDown={(e) => handleMouseDown(e, hotspot.id)}\n                    onClick={() => !editMode && handleHotspotClick(hotspot)}\n                  >\n                    {/* Indicador de Status com Ícone */}\n                    <div \n                      className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rounded-full flex flex-col items-center justify-center shadow-lg transition-transform group-hover:scale-125\"\n                      style={{ \n                        backgroundColor: hotspotColor,\n                        width: `${circleSize}px`,\n                        height: `${circleSize}px`,\n                      }}\n                    >\n                      <i className={`${iconClass} text-white mb-1`} style={{ fontSize: `${fontSize + 4}px` }}></i>\n                      <span className=\"text-white font-bold\" style={{ fontSize: `${fontSize - 2}px` }}>\n                        {equipment.progresso}%\n                      </span>\n                    </div>\n                    \n                    {/* Tooltip ao passar o mouse */}\n                    {!editMode && (\n                      <div className={`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 ${\n                        darkMode ? 'bg-slate-900 text-white' : 'bg-white text-gray-900'\n                      } border ${darkMode ? 'border-slate-700' : 'border-gray-200'}`}>\n                        <div className=\"font-bold\">{equipment.nome}</div>\n                        <div className=\"text-sm\">{equipment.setor}</div>\n                        <div className=\"text-xs\">Revisão: {equipment.progresso}%</div>\n                      </div>\n                    )}\n\n                    {/* Ícone de criticidade */}\n                    {(equipment.criticidade?.toLowerCase() === 'critica' || equipment.criticidade?.toLowerCase() === 'crítica') && (\n                      <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center\">\n                        <i className=\"ri-alert-fill text-white text-xs\"></i>\n                      </div>\n                    )}\n\n                    {/* Controles de edição */}\n                    {editMode && selectedHotspot === hotspot.id && (\n                      <>\n                        {/* Resize handle */}\n                        <div\n                          className=\"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize\"\n                          onMouseDown={(e) => handleMouseDown(e, hotspot.id, true)}\n                        ></div>\n                        \n                        {/* Delete button */}\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteHotspot(hotspot.id);\n                          }}\n                          className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 cursor-pointer\"\n                        >\n                          <i className=\"ri-close-line text-xs\"></i>\n                        </button>\n                      </>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n\n          {/* Modal de Upload de Imagem */}\n          {showImageUpload && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setShowImageUpload(false)}>\n              <div className={`${darkMode ? 'bg-slate-800' : 'bg-white'} rounded-xl p-6 w-full max-w-md`} onClick={(e) => e.stopPropagation()}>\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Alterar Imagem do Mapa\n                  </h3>\n                  <button\n                    onClick={() => setShowImageUpload(false)}\n                    className={`w-8 h-8 flex items-center justify-center rounded-lg cursor-pointer ${\n                      darkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-100'\n                    }`}\n                  >\n                    <i className={`ri-close-line ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}></i>\n                  </button>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"border-2 border-dashed rounded-lg p-8 text-center\" style={{ borderColor: darkMode ? '#475569' : '#d1d5db' }}>\n                    <i className={`ri-image-add-line text-5xl mb-4 ${darkMode ? 'text-gray-400' : 'text-gray-300'}`}></i>\n                    <p className={`mb-4 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Faça upload da imagem do seu mapa industrial\n                    </p>\n                    <label className=\"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 cursor-pointer inline-block whitespace-nowrap\">\n                      <i className=\"ri-upload-2-line mr-2\"></i>\n                      Selecionar Imagem\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleImageUpload}\n                        className=\"hidden\"\n                      />\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Modal Adicionar Hotspot */}\n          {showAddHotspot && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setShowAddHotspot(false)}>\n              <div className={`${darkMode ? 'bg-slate-800' : 'bg-white'} rounded-xl p-6 w-full max-w-md`} onClick={(e) => e.stopPropagation()}>\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Adicionar Hotspot\n                  </h3>\n                  <button\n                    onClick={() => setShowAddHotspot(false)}\n                    className={`w-8 h-8 flex items-center justify-center rounded-lg cursor-pointer ${\n                      darkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-100'\n                    }`}\n                  >\n                    <i className={`ri-close-line ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}></i>\n                  </button>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Selecione o Equipamento\n                    </label>\n                    <select\n                      value={selectedEquipmentForHotspot}\n                      onChange={(e) => setSelectedEquipmentForHotspot(e.target.value)}\n                      className={`w-full px-4 py-2 pr-8 rounded-lg border ${\n                        darkMode \n                          ? 'bg-slate-700 border-slate-600 text-white' \n                          : 'bg-white border-gray-300 text-gray-900'\n                      } focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer`}\n                    >\n                      <option value=\"\">Selecione...</option>\n                      {equipments.map((eq) => (\n                        <option key={eq.id} value={eq.id}>\n                          {eq.nome} - {eq.setor}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={() => setShowAddHotspot(false)}\n                      className={`flex-1 px-4 py-2 rounded-lg border whitespace-nowrap cursor-pointer ${\n                        darkMode \n                          ? 'border-slate-600 text-gray-300 hover:bg-slate-700' \n                          : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                      }`}\n                    >\n                      Cancelar\n                    </button>\n                    <button\n                      onClick={handleAddHotspot}\n                      disabled={!selectedEquipmentForHotspot}\n                      className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\n                    >\n                      Adicionar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Modal de Personalização */}\n          {showCustomizePanel && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setShowCustomizePanel(false)}>\n              <div className={`${darkMode ? 'bg-slate-800' : 'bg-white'} rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto`} onClick={(e) => e.stopPropagation()}>\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Personalizar Hotspot\n                  </h3>\n                  <button\n                    onClick={() => setShowCustomizePanel(false)}\n                    className={`w-8 h-8 flex items-center justify-center rounded-lg cursor-pointer ${\n                      darkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-100'\n                    }`}\n                  >\n                    <i className={`ri-close-line ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}></i>\n                  </button>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* Ícone */}\n                  <div>\n                    <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Ícone do Equipamento\n                    </label>\n                    <div className=\"grid grid-cols-5 gap-3\">\n                      {[\n                        { icon: 'ri-tools-fill', label: 'Ferramentas' },\n                        { icon: 'ri-settings-5-fill', label: 'Engrenagem' },\n                        { icon: 'ri-cpu-fill', label: 'CPU' },\n                        { icon: 'ri-flashlight-fill', label: 'Energia' },\n                        { icon: 'ri-fire-fill', label: 'Fogo' },\n                        { icon: 'ri-water-flash-fill', label: 'Água' },\n                        { icon: 'ri-temp-hot-fill', label: 'Temperatura' },\n                        { icon: 'ri-oil-fill', label: 'Óleo' },\n                        { icon: 'ri-arrow-right-circle-fill', label: 'Seta' },\n                        { icon: 'ri-map-pin-fill', label: 'Pin' },\n                        { icon: 'ri-focus-3-fill', label: 'Alvo' },\n                        { icon: 'ri-radar-fill', label: 'Radar' },\n                        { icon: 'ri-dashboard-fill', label: 'Dashboard' },\n                        { icon: 'ri-speed-fill', label: 'Velocidade' },\n                        { icon: 'ri-plug-fill', label: 'Plug' },\n                      ].map((item) => (\n                        <button\n                          key={item.icon}\n                          onClick={() => setHotspotIcon(item.icon)}\n                          className={`w-12 h-12 rounded-lg flex items-center justify-center cursor-pointer transition-all ${\n                            hotspotIcon === item.icon \n                              ? 'bg-blue-600 text-white ring-4 ring-blue-500 scale-110' \n                              : darkMode \n                                ? 'bg-slate-700 text-gray-300 hover:bg-slate-600' \n                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                          }`}\n                          title={item.label}\n                        >\n                          <i className={`${item.icon} text-xl`}></i>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Cor */}\n                  <div>\n                    <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Cor do Indicador\n                    </label>\n                    <div className=\"grid grid-cols-5 gap-3\">\n                      {['#10b981', '#3b82f6', '#8b5cf6', '#f59e0b', '#ef4444', '#ec4899', '#14b8a6', '#f97316', '#6366f1', '#84cc16'].map((color) => (\n                        <button\n                          key={color}\n                          onClick={() => setHotspotColor(color)}\n                          className={`w-12 h-12 rounded-lg cursor-pointer transition-all ${\n                            hotspotColor === color ? 'ring-4 ring-blue-500 scale-110' : 'hover:scale-105'\n                          }`}\n                          style={{ backgroundColor: color }}\n                        />\n                      ))}\n                    </div>\n                    <div className=\"mt-3 flex items-center gap-2\">\n                      <input\n                        type=\"color\"\n                        value={hotspotColor}\n                        onChange={(e) => setHotspotColor(e.target.value)}\n                        className=\"w-12 h-12 rounded-lg cursor-pointer\"\n                      />\n                      <input\n                        type=\"text\"\n                        value={hotspotColor}\n                        onChange={(e) => setHotspotColor(e.target.value)}\n                        className={`flex-1 px-3 py-2 rounded-lg border ${\n                          darkMode \n                            ? 'bg-slate-700 border-slate-600 text-white' \n                            : 'bg-white border-gray-300 text-gray-900'\n                        } focus:outline-none focus:ring-2 focus:ring-blue-500`}\n                      />\n                    </div>\n                  </div>\n\n                  {/* Tamanho da Fonte */}\n                  <div>\n                    <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Tamanho da Fonte: {hotspotFontSize}px\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"10\"\n                      max=\"24\"\n                      value={hotspotFontSize}\n                      onChange={(e) => setHotspotFontSize(Number(e.target.value))}\n                      className=\"w-full cursor-pointer\"\n                    />\n                    <div className=\"flex justify-between text-xs mt-1\">\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>10px</span>\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>24px</span>\n                    </div>\n                  </div>\n\n                  {/* Preview */}\n                  <div>\n                    <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Pré-visualização\n                    </label>\n                    <div className=\"flex items-center justify-center p-6 bg-slate-700 rounded-lg\">\n                      <div \n                        className=\"rounded-full flex flex-col items-center justify-center shadow-lg\"\n                        style={{ \n                          backgroundColor: hotspotColor,\n                          width: '64px',\n                          height: '64px',\n                        }}\n                      >\n                        <i className={`${hotspotIcon} text-white mb-1`} style={{ fontSize: `${hotspotFontSize + 4}px` }}></i>\n                        <span className=\"text-white font-bold text-xs\">\n                          85%\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Botões */}\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={() => setShowCustomizePanel(false)}\n                      className={`flex-1 px-4 py-2 rounded-lg border whitespace-nowrap cursor-pointer ${\n                        darkMode \n                          ? 'border-slate-600 text-gray-300 hover:bg-slate-700' \n                          : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                      }`}\n                    >\n                      Cancelar\n                    </button>\n                    <button\n                      onClick={applyCustomization}\n                      className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 whitespace-nowrap cursor-pointer\"\n                    >\n                      Aplicar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Equipment Details Panel */}\n          {selectedEquipment && !editMode && (\n            <div className={`fixed right-6 top-24 w-96 rounded-xl shadow-2xl ${\n              darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-gray-200'\n            } border p-6 z-50 max-h-[calc(100vh-120px)] overflow-y-auto`}>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                  Detalhes do Equipamento\n                </h3>\n                  <div className=\"flex items-center gap-2\">\n                    <button\n                      onClick={openServiceModalForSelected}\n                      className=\"px-3 py-1 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 text-sm\"\n                    >\n                      Cadastrar Serviço Padrão\n                    </button>\n                    <button\n                      onClick={() => {\n                        setSelectedEquipment(null);\n                        setEquipmentDetails(null);\n                      }}\n                      className={`w-8 h-8 rounded-lg flex items-center justify-center cursor-pointer ${\n                        darkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-100'\n                      }`}\n                    >\n                      <i className={`ri-close-line ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}></i>\n                    </button>\n                  </div>\n              </div>\n\n              {loadingDetails ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n                  <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Carregando...</p>\n                </div>\n              ) : equipmentDetails ? (\n                <div className=\"space-y-4\">\n                  {/* Informações Básicas */}\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Nome</label>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {selectedEquipment.nome}\n                    </p>\n                  </div>\n\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Setor</label>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {selectedEquipment.setor}\n                    </p>\n                  </div>\n\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Status</label>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div\n                        className=\"w-3 h-3 rounded-full\"\n                        style={{ backgroundColor: getStatusColor(selectedEquipment.status) }}\n                      ></div>\n                      <span className={`font-medium capitalize ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                        {statusLabels[selectedEquipment.status] || selectedEquipment.status}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Progresso */}\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Progresso da Revisão</label>\n                    <div className=\"mt-2\">\n                      <div className=\"flex items-center justify-between mb-1\">\n                        <span className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                          {selectedEquipment.progresso}%\n                        </span>\n                      </div>\n                      <div className={`w-full h-2 rounded-full ${darkMode ? 'bg-slate-700' : 'bg-gray-200'}`}>\n                        <div\n                          className=\"h-full rounded-full bg-gradient-to-r from-blue-600 to-purple-600\"\n                          style={{ width: `${selectedEquipment.progresso}%` }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Custo Total */}\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Custo Acumulado</label>\n                    <p className={`font-bold text-lg ${darkMode ? 'text-green-400' : 'text-green-600'}`}>\n                      R$ {equipmentDetails.custo_total?.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) || '0,00'}\n                    </p>\n                  </div>\n\n                  {/* Componentes */}\n                  <div>\n                    <label className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Componentes ({equipmentDetails.componentes?.length || 0})\n                    </label>\n                    <div className=\"mt-2 space-y-2 max-h-40 overflow-y-auto\">\n                      {equipmentDetails.componentes?.map((comp: any) => (\n                        <div key={comp.id} className={`p-2 rounded-lg ${darkMode ? 'bg-slate-700' : 'bg-gray-100'}`}>\n                          <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                            {comp.componentes?.nome || 'Sem nome'}\n                          </p>\n                          <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            Qtd: {comp.quantidade || 0}\n                          </p>\n                        </div>\n                      ))}\n                      {(!equipmentDetails.componentes || equipmentDetails.componentes.length === 0) && (\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          Nenhum componente vinculado\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Ordens de Serviço */}\n                  <div>\n                    <label className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Ordens de Serviço Recentes\n                    </label>\n                    <div className=\"mt-2 space-y-2 max-h-40 overflow-y-auto\">\n                      {equipmentDetails.ordens_servico?.map((os: any) => (\n                        <div key={os.id} className={`p-2 rounded-lg ${darkMode ? 'bg-slate-700' : 'bg-gray-100'}`}>\n                          <div className=\"flex items-center justify-between\">\n                            <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                              OS #{os.numero_os || os.id.slice(0, 8)}\n                            </p>\n                            <span className={`text-xs px-2 py-1 rounded ${\n                              os.status === 'concluida' \n                                ? 'bg-green-500/20 text-green-400' \n                                : 'bg-yellow-500/20 text-yellow-400'\n                            }`}>\n                              {os.status}\n                            </span>\n                          </div>\n                          <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            {new Date(os.created_at).toLocaleDateString('pt-BR')}\n                          </p>\n                        </div>\n                      ))}\n                      {(!equipmentDetails.ordens_servico || equipmentDetails.ordens_servico.length === 0) && (\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          Nenhuma OS registrada\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Histórico de Manutenção */}\n                  <div>\n                    <label className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      Histórico de Manutenção\n                    </label>\n                    <div className=\"mt-2 space-y-2 max-h-40 overflow-y-auto\">\n                      {equipmentDetails.historico?.map((hist: any) => (\n                        <div key={hist.id} className={`p-2 rounded-lg ${darkMode ? 'bg-slate-700' : 'bg-gray-100'}`}>\n                          <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                            {hist.tipo_revisao || 'Manutenção'}\n                          </p>\n                          <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            {new Date(hist.data_revisao).toLocaleDateString('pt-BR')}\n                          </p>\n                        </div>\n                      ))}\n                      {(!equipmentDetails.historico || equipmentDetails.historico.length === 0) && (\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          Nenhum histórico registrado\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={() => navigate(`/equipamento-detalhes?id=${selectedEquipment.id}`)}\n                    className=\"w-full px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all whitespace-nowrap cursor-pointer\"\n                  >\n                    Ver Detalhes Completos\n                  </button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Nome</label>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {selectedEquipment.nome}\n                    </p>\n                  </div>\n\n                  <div>\n                    <label className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Setor</label>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {selectedEquipment.setor}\n                    </p>\n                  </div>\n\n                  <button\n                    onClick={() => navigate(`/equipamento-detalhes?id=${selectedEquipment.id}`)}\n                    className=\"w-full px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all whitespace-nowrap cursor-pointer\"\n                  >\n                    Ver Detalhes Completos\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Service modal for adding padrão services to one or many equipments */}\n          {showServiceModal && (\n            <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n              <div className={`${darkMode ? 'bg-slate-800' : 'bg-white'} rounded-xl w-full max-w-2xl p-6`}> \n                <div className=\"flex items-center justify-between mb-4\">\n                  <h4 className={`text-lg font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>Cadastrar Serviço Padrão</h4>\n                  <button onClick={() => setShowServiceModal(false)} className={`w-8 h-8 rounded flex items-center justify-center ${darkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-100'}`}>\n                    <i className={`ri-close-line ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}></i>\n                  </button>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Nome do Serviço</label>\n                    <input type=\"text\" value={serviceName} onChange={(e) => setServiceName(e.target.value)} className={`w-full px-4 py-2 rounded-lg border ${darkMode ? 'bg-slate-700 border-slate-600 text-white' : 'bg-white border-gray-300 text-gray-900'}`} placeholder=\"Ex: Troca de correia\" />\n                  </div>\n\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Descrição (opcional)</label>\n                    <textarea value={serviceDesc} onChange={(e) => setServiceDesc(e.target.value)} className={`w-full px-4 py-2 rounded-lg border ${darkMode ? 'bg-slate-700 border-slate-600 text-white' : 'bg-white border-gray-300 text-gray-900'}`} rows={3} />\n                  </div>\n\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Selecionar Equipamentos</label>\n                    <div className=\"mt-2 max-h-48 overflow-y-auto space-y-2 p-2 rounded border\">\n                      {equipments.map((eq) => (\n                        <label key={eq.id} className={`flex items-center gap-2 cursor-pointer p-1 rounded ${darkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-50'}`}>\n                          <input type=\"checkbox\" checked={selectedEquipmentsForService.includes(eq.id)} onChange={(e) => {\n                            if (e.target.checked) setSelectedEquipmentsForService(prev => [...prev, eq.id]);\n                            else setSelectedEquipmentsForService(prev => prev.filter(id => id !== eq.id));\n                          }} />\n                          <span className={`${darkMode ? 'text-gray-200' : 'text-gray-900'}`}>{eq.nome}</span>\n                        </label>\n                      ))}\n                      {equipments.length === 0 && (\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Nenhum equipamento disponível</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-3 pt-4\">\n                    <button onClick={() => setShowServiceModal(false)} className={`flex-1 px-4 py-2 rounded-lg ${darkMode ? 'bg-slate-700 text-white hover:bg-slate-600' : 'bg-gray-200 text-gray-900 hover:bg-gray-300'}`}>Cancelar</button>\n                    <button onClick={handleSubmitService} className=\"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700\">Cadastrar</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":["MapaPage","navigate","useNavigate","sidebarOpen","setSidebarOpen","useState","darkMode","setDarkMode","equipments","setEquipments","hotspots","setHotspots","selectedEquipment","setSelectedEquipment","filterStatus","setFilterStatus","filterSetor","setFilterSetor","setores","setSetores","loading","setLoading","mapImage","setMapImage","showImageUpload","setShowImageUpload","editMode","setEditMode","selectedHotspot","setSelectedHotspot","dragging","setDragging","resizing","setResizing","dragStart","setDragStart","showAddHotspot","setShowAddHotspot","selectedEquipmentForHotspot","setSelectedEquipmentForHotspot","equipmentDetails","setEquipmentDetails","loadingDetails","setLoadingDetails","showCustomizePanel","setShowCustomizePanel","hotspotColor","setHotspotColor","hotspotFontSize","setHotspotFontSize","hotspotIcon","setHotspotIcon","mapRef","useRef","showServiceModal","setShowServiceModal","serviceName","setServiceName","serviceDesc","setServiceDesc","selectedEquipmentsForService","setSelectedEquipmentsForService","useEffect","loadEquipments","loadSetores","loadHotspots","savedImage","interval","data","error","supabase","s","err","eqData","eqError","mapped","item","_a","hotspotsData","handleImageUpload","e","file","reader","result","handleAddHotspot","existingHotspot","handleMouseDown","hotspotId","isResize","handleMouseMove","h","rect","deltaX","deltaY","updatedHotspots","handleMouseUp","hotspot","handleDeleteHotspot","loadEquipmentDetails","equipmentId","compData","histData","osData","custosData","totalCustos","sum","c","openServiceModalForSelected","handleSubmitService","rows","equipId","handleHotspotClick","equipment","eq","getStatusColor","status","getFilteredHotspots","statusMatch","setorMatch","statusLabels","filteredCount","handleCustomizeHotspot","applyCustomization","handleSizeChange","delta","newWidth","newHeight","handleCircleSizeChange","newFontSize","handleSaveAndExit","savePromises","jsx","Sidebar","TopBar","jsxs","Fragment","setor","fontSize","iconClass","circleSize","_b","color","_c","comp","_d","os","_e","hist","prev","id"],"mappings":"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"}