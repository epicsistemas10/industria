import{r as l,s as I,j as e,u as ee,a as te}from"./index-FRp6wVcD.js";import{S as re,T as ae}from"./TopBar-DS7MBlT5.js";import{e as v}from"./api-DesrtcF2.js";import{u as se}from"./usePermissions-YeN8SHyT.js";function oe({isOpen:p,onClose:f,onSuccess:$,equipamentoId:c,darkMode:o=!0}){const[h,d]=l.useState(!1),[j,y]=l.useState([]),[s,i]=l.useState({codigo_interno:"",nome:"",setor_id:"",descricao:"",especificacoes:"",fabricante:"",modelo:"",linha_setor:"",ano_fabricacao:new Date().getFullYear(),criticidade:"Média",status_revisao:0,foto_url:"",mtbf:0,data_inicio_revisao:"",data_prevista_fim:""});l.useEffect(()=>{p&&(C(),c?u():S())},[p,c]);const C=async()=>{try{const{data:r,error:n}=await I.from("setores").select("*").order("nome");if(n)throw n;y(r||[])}catch(r){console.error("Erro ao carregar setores:",r)}},u=async()=>{if(c)try{d(!0);const r=await v.getById(c);i({codigo_interno:r.codigo_interno||"",nome:r.nome||"",setor_id:r.setor_id||"",descricao:r.descricao||"",especificacoes:r.especificacoes||"",fabricante:r.fabricante||"",modelo:r.modelo||"",linha_setor:r.linha_setor||"",ano_fabricacao:r.ano_fabricacao||new Date().getFullYear(),criticidade:r.criticidade||"Média",status_revisao:r.status_revisao||0,foto_url:r.foto_url||"",mtbf:r.mtbf||0,data_inicio_revisao:r.data_inicio_revisao||"",data_prevista_fim:r.data_prevista_fim||""})}catch(r){console.error("Erro ao carregar equipamento:",r)}finally{d(!1)}},S=()=>{i({codigo_interno:"",nome:"",setor_id:"",descricao:"",especificacoes:"",fabricante:"",modelo:"",linha_setor:"",ano_fabricacao:new Date().getFullYear(),criticidade:"Média",status_revisao:0,foto_url:"",mtbf:0,data_inicio_revisao:"",data_prevista_fim:""})},m=async r=>{r.preventDefault();try{d(!0),c?await v.update(c,s):await v.create(s),$(),f()}catch(n){console.error("Erro ao salvar equipamento:",n),alert("Erro ao salvar equipamento. Tente novamente.")}finally{d(!1)}},E=r=>{var w;const n=(w=r.target.files)==null?void 0:w[0];if(n){const g=new FileReader;g.onloadend=()=>{i({...s,foto_url:g.result})},g.readAsDataURL(n)}};return p?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${o?"bg-slate-800":"bg-white"} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-cyan-600 p-6 flex justify-between items-center rounded-t-xl",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:[e.jsx("i",{className:"ri-tools-line mr-2"}),c?"Editar Equipamento":"Novo Equipamento"]}),e.jsx("button",{onClick:f,className:"text-white hover:text-gray-200 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"ID / Código Interno *"}),e.jsx("input",{type:"text",required:!0,value:s.codigo_interno,onChange:r=>i({...s,codigo_interno:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Ex: EQ-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Nome do Equipamento *"}),e.jsx("input",{type:"text",required:!0,value:s.nome,onChange:r=>i({...s,nome:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Ex: Descaroçador 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Setor *"}),e.jsxs("select",{required:!0,value:s.setor_id,onChange:r=>i({...s,setor_id:r.target.value}),className:`w-full px-4 py-2 rounded-lg border cursor-pointer ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500 pr-8`,children:[e.jsx("option",{value:"",children:"Selecione o setor"}),j.map(r=>e.jsx("option",{value:r.id,children:r.nome},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Linha / Setor Específico"}),e.jsx("input",{type:"text",value:s.linha_setor,onChange:r=>i({...s,linha_setor:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Ex: Linha A, Setor 2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Marca / Fabricante"}),e.jsx("input",{type:"text",value:s.fabricante,onChange:r=>i({...s,fabricante:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Ex: Siemens"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Modelo"}),e.jsx("input",{type:"text",value:s.modelo,onChange:r=>i({...s,modelo:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Ex: XYZ-1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Criticidade *"}),e.jsxs("select",{required:!0,value:s.criticidade,onChange:r=>i({...s,criticidade:r.target.value}),className:`w-full px-4 py-2 rounded-lg border cursor-pointer ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500 pr-8`,children:[e.jsx("option",{value:"Baixa",children:"Baixa"}),e.jsx("option",{value:"Média",children:"Média"}),e.jsx("option",{value:"Alta",children:"Alta"}),e.jsx("option",{value:"Crítica",children:"Crítica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Ano de Fabricação"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear(),value:s.ano_fabricacao,onChange:r=>i({...s,ano_fabricacao:parseInt(r.target.value)}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Especificações Técnicas"}),e.jsx("textarea",{rows:3,value:s.especificacoes,onChange:r=>i({...s,especificacoes:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Potência, voltagem, capacidade, etc...",maxLength:500})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Descrição"}),e.jsx("textarea",{rows:3,value:s.descricao,onChange:r=>i({...s,descricao:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${o?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:border-blue-500`,placeholder:"Descreva o equipamento...",maxLength:500})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Foto do Equipamento"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.foto_url&&e.jsx("img",{src:s.foto_url,alt:"Preview",className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-upload-2-line mr-2"}),s.foto_url?"Alterar Foto":"Fazer Upload",e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]}),s.foto_url&&e.jsx("button",{type:"button",onClick:()=>i({...s,foto_url:""}),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 cursor-pointer whitespace-nowrap",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:f,disabled:h,className:`flex-1 px-6 py-3 rounded-lg transition-colors whitespace-nowrap cursor-pointer ${o?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"}`,children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:h,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all whitespace-nowrap cursor-pointer disabled:opacity-50",children:h?"Salvando...":c?"Atualizar":"Criar"})]})]})]})}):null}function de(){const p=ee(),{user:f}=te(),{canCreate:$,canDelete:c}=se(),[o,h]=l.useState([]),[d,j]=l.useState(!0),[y,s]=l.useState(!1),[i,C]=l.useState(""),[u,S]=l.useState(""),[m,E]=l.useState(""),[r,n]=l.useState(!1),[w,g]=l.useState(),[a,Y]=l.useState(!0),[D,O]=l.useState(!0),[R,N]=l.useState(!1),[q,F]=l.useState(""),[A,L]=l.useState(""),[k,U]=l.useState(null);l.useEffect(()=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a]),l.useEffect(()=>{_()},[]);const _=async()=>{try{j(!0),s(!1);const t=await v.getAll();h(t||[])}catch(t){console.error("Erro ao carregar equipamentos:",t),s(!0),h([])}finally{j(!1)}},V=async t=>{if(!c){alert("Você não tem permissão para excluir equipamentos");return}if(confirm("Tem certeza que deseja excluir este equipamento?"))try{await v.delete(t),_()}catch(x){console.error("Erro ao excluir equipamento:",x),alert("Erro ao excluir equipamento")}},G=t=>{g(t),n(!0)},P=()=>{g(void 0),n(!0)},Q=()=>{n(!1),g(void 0)},X=()=>{_()},T=o.filter(t=>{var B,z;const x=(((B=t.nome)==null?void 0:B.toLowerCase())||"").includes(i.toLowerCase()),b=((z=t.setores)==null?void 0:z.nome)||t.setor||"",W=!u||b===u,M=!m||t.criticidade===m;return x&&W&&M}),Z=[...new Set(o.map(t=>{var x;return((x=t.setores)==null?void 0:x.nome)||t.setor}).filter(Boolean))],H=["Baixa","Média","Alta","Crítica"],J=t=>{switch(t==null?void 0:t.toLowerCase()){case"baixa":return"bg-green-500/20 text-green-400";case"média":case"media":return"bg-yellow-500/20 text-yellow-400";case"alta":return"bg-orange-500/20 text-orange-400";case"crítica":case"critica":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},K=t=>t>=100?"bg-green-500":t>=75?"bg-blue-500":t>=50?"bg-yellow-500":t>=25?"bg-orange-500":"bg-red-500";return f?e.jsxs("div",{className:`min-h-screen ${a?"bg-slate-900":"bg-gray-100"} transition-colors duration-300`,children:[e.jsx(re,{isOpen:D,onToggle:()=>O(!D),darkMode:a}),e.jsxs("div",{className:`transition-all duration-300 ${D?"ml-64":"ml-20"}`,children:[e.jsx(ae,{darkMode:a,setDarkMode:Y}),e.jsxs("main",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-3xl font-bold ${a?"text-white":"text-gray-900"}`,children:[e.jsx("i",{className:"ri-tools-line mr-3"}),"Equipamentos"]}),e.jsx("p",{className:`mt-1 ${a?"text-gray-400":"text-gray-600"}`,children:"Gerencie todos os equipamentos da planta industrial"})]}),e.jsxs("button",{onClick:P,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Novo Equipamento"]})]}),e.jsx("div",{className:`${a?"bg-slate-800":"bg-white"} rounded-xl p-4 mb-6 shadow-lg`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:`ri-search-line absolute left-3 top-1/2 -translate-y-1/2 ${a?"text-gray-400":"text-gray-500"}`}),e.jsx("input",{type:"text",placeholder:"Buscar equipamento...",value:i,onChange:t=>C(t.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${a?"bg-slate-700 border-slate-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-green-500 focus:border-transparent`})]}),e.jsxs("select",{value:u,onChange:t=>S(t.target.value),className:`px-4 py-2 rounded-lg border ${a?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-green-500 focus:border-transparent pr-8`,children:[e.jsx("option",{value:"",children:"Todos os Setores"}),Z.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:m,onChange:t=>E(t.target.value),className:`px-4 py-2 rounded-lg border ${a?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-green-500 focus:border-transparent pr-8`,children:[e.jsx("option",{value:"",children:"Todas as Criticidades"}),H.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),d&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}),!d&&y&&e.jsxs("div",{className:`${a?"bg-slate-800":"bg-white"} rounded-xl p-12 text-center shadow-lg`,children:[e.jsx("i",{className:"ri-error-warning-line text-6xl mb-4 text-red-400"}),e.jsx("h3",{className:`text-xl font-semibold mb-2 ${a?"text-white":"text-gray-900"}`,children:"Erro ao carregar equipamentos"}),e.jsx("p",{className:`mb-6 ${a?"text-gray-400":"text-gray-600"}`,children:"Ocorreu um erro ao buscar os dados. Tente novamente."}),e.jsxs("button",{onClick:_,className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Tentar Novamente"]})]}),!d&&!y&&T.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:T.map(t=>{var x;return e.jsxs("div",{className:`rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer border overflow-hidden group ${a?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-slate-700 to-slate-800 overflow-hidden",children:[t.foto_url?e.jsx("img",{src:t.foto_url,alt:t.nome,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("i",{className:"ri-tools-line text-6xl text-gray-500"})}),e.jsx("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold ${J(t.criticidade)}`,children:t.criticidade||"N/A"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:`font-bold text-lg mb-2 truncate ${a?"text-white":"text-gray-900"}`,children:t.nome}),e.jsxs("div",{className:`flex items-center gap-2 text-sm mb-3 ${a?"text-gray-400":"text-gray-600"}`,children:[e.jsx("i",{className:"ri-building-line"}),e.jsx("span",{children:((x=t.setores)==null?void 0:x.nome)||t.setor||"Sem setor"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Progresso"}),e.jsxs("span",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:[t.status_revisao||0,"%"]})]}),e.jsx("div",{className:`w-full rounded-full h-2 ${a?"bg-slate-700":"bg-gray-200"}`,children:e.jsx("div",{className:`h-2 rounded-full transition-all ${K(t.status_revisao||0)}`,style:{width:`${t.status_revisao||0}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p(`/equipamento/${t.id}`),className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"Ver Detalhes"]}),e.jsx("button",{onClick:b=>{b.stopPropagation(),U(t.id),F(""),L(""),N(!0)},className:"w-10 h-10 flex items-center justify-center bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors whitespace-nowrap cursor-pointer",title:"Cadastrar Serviço",children:e.jsx("i",{className:"ri-add-circle-line text-lg"})}),e.jsx("button",{onClick:b=>{b.stopPropagation(),G(t.id)},className:"w-10 h-10 flex items-center justify-center bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-lg"})}),e.jsx("button",{onClick:b=>{b.stopPropagation(),V(t.id)},className:"w-10 h-10 flex items-center justify-center bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap cursor-pointer",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]})]},t.id)})}),!d&&!y&&T.length===0&&e.jsxs("div",{className:`${a?"bg-slate-800":"bg-white"} rounded-xl p-12 text-center shadow-lg`,children:[e.jsx("i",{className:`ri-tools-line text-6xl mb-4 ${a?"text-gray-600":"text-gray-300"}`}),e.jsx("h3",{className:`text-xl font-semibold mb-2 ${a?"text-white":"text-gray-900"}`,children:"Nenhum equipamento encontrado"}),e.jsx("p",{className:`mb-6 ${a?"text-gray-400":"text-gray-600"}`,children:i||u||m?"Tente ajustar os filtros de busca":"Comece cadastrando um novo equipamento"}),$&&!i&&!u&&!m&&e.jsxs("button",{onClick:P,className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Cadastrar Primeiro Equipamento"]})]})]})]}),e.jsx(oe,{isOpen:r,onClose:Q,onSuccess:X,equipamentoId:w,darkMode:a}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`${a?"bg-slate-800":"bg-white"} rounded-xl w-full max-w-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:"Cadastrar Serviço"}),e.jsx("button",{onClick:()=>N(!1),className:`w-8 h-8 rounded flex items-center justify-center ${a?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:e.jsx("i",{className:`ri-close-line ${a?"text-gray-300":"text-gray-600"}`})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Nome do Serviço"}),e.jsx("input",{type:"text",value:q,onChange:t=>F(t.target.value),className:`w-full px-4 py-2 rounded-lg border ${a?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Ex: Troca de correia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Descrição (opcional)"}),e.jsx("textarea",{value:A,onChange:t=>L(t.target.value),className:`w-full px-4 py-2 rounded-lg border ${a?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"}`,rows:3})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>N(!1),className:`flex-1 px-4 py-2 rounded-lg ${a?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"}`,children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(!q||!k){alert("Informe nome do serviço");return}try{const{error:t}=await I.from("equipamento_servicos").insert([{equipamento_id:k,nome:q,descricao:A||null}]);if(t){console.error("Erro ao criar serviço:",t),alert("Erro ao cadastrar serviço");return}alert("Serviço cadastrado com sucesso"),N(!1)}catch(t){console.error(t),alert("Erro ao cadastrar serviço")}},className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Cadastrar"})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"Carregando..."})]})})}export{de as default};
//# sourceMappingURL=page-De8QRNIK.js.map
