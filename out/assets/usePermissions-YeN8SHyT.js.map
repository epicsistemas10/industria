{"version":3,"file":"usePermissions-YeN8SHyT.js","sources":["../../src/hooks/usePermissions.ts"],"sourcesContent":["import { useAuth } from '../contexts/AuthContext';\n\nexport type Permission = 'admin' | 'gestor' | 'mecanico' | 'auxiliar' | 'visitante';\n\ninterface PermissionRules {\n  canCreate: boolean;\n  canEdit: boolean;\n  canDelete: boolean;\n  canView: boolean;\n  canManageUsers: boolean;\n  canManageCosts: boolean;\n  canManageTeams: boolean;\n  canExecuteOS: boolean;\n  canApproveImprovements: boolean;\n}\n\nexport function usePermissions(): PermissionRules & { permission: Permission | null } {\n  const { user } = useAuth();\n  \n  const permission = (user?.user_metadata?.permission || 'visitante') as Permission;\n\n  const rules: Record<Permission, PermissionRules> = {\n    admin: {\n      canCreate: true,\n      canEdit: true,\n      canDelete: true,\n      canView: true,\n      canManageUsers: true,\n      canManageCosts: true,\n      canManageTeams: true,\n      canExecuteOS: true,\n      canApproveImprovements: true,\n    },\n    gestor: {\n      canCreate: true,\n      canEdit: true,\n      canDelete: true,\n      canView: true,\n      canManageUsers: false,\n      canManageCosts: true,\n      canManageTeams: true,\n      canExecuteOS: true,\n      canApproveImprovements: true,\n    },\n    mecanico: {\n      canCreate: false,\n      canEdit: false,\n      canDelete: false,\n      canView: true,\n      canManageUsers: false,\n      canManageCosts: false,\n      canManageTeams: false,\n      canExecuteOS: true,\n      canApproveImprovements: false,\n    },\n    auxiliar: {\n      canCreate: false,\n      canEdit: false,\n      canDelete: false,\n      canView: true,\n      canManageUsers: false,\n      canManageCosts: false,\n      canManageTeams: false,\n      canExecuteOS: false,\n      canApproveImprovements: false,\n    },\n    visitante: {\n      canCreate: false,\n      canEdit: false,\n      canDelete: false,\n      canView: true,\n      canManageUsers: false,\n      canManageCosts: false,\n      canManageTeams: false,\n      canExecuteOS: false,\n      canApproveImprovements: false,\n    },\n  };\n\n  return {\n    ...rules[permission],\n    permission,\n  };\n}\n"],"names":["usePermissions","user","useAuth","permission","_a"],"mappings":"wCAgBO,SAASA,GAAsE,OACpF,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EAEXC,IAAcC,EAAAH,GAAA,YAAAA,EAAM,gBAAN,YAAAG,EAAqB,aAAc,YA4DvD,MAAO,CACL,GA3DiD,CACjD,MAAO,CACL,UAAW,GACX,QAAS,GACT,UAAW,GACX,QAAS,GACT,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,aAAc,GACd,uBAAwB,EAAA,EAE1B,OAAQ,CACN,UAAW,GACX,QAAS,GACT,UAAW,GACX,QAAS,GACT,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,aAAc,GACd,uBAAwB,EAAA,EAE1B,SAAU,CACR,UAAW,GACX,QAAS,GACT,UAAW,GACX,QAAS,GACT,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,aAAc,GACd,uBAAwB,EAAA,EAE1B,SAAU,CACR,UAAW,GACX,QAAS,GACT,UAAW,GACX,QAAS,GACT,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,aAAc,GACd,uBAAwB,EAAA,EAE1B,UAAW,CACT,UAAW,GACX,QAAS,GACT,UAAW,GACX,QAAS,GACT,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,aAAc,GACd,uBAAwB,EAAA,CAC1B,EAISD,CAAU,EACnB,WAAAA,CAAA,CAEJ"}