{"version":3,"file":"page-fjwSB3MB.js","sources":["../../src/pages/melhorias/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Sidebar from '../dashboard/components/Sidebar';\nimport TopBar from '../dashboard/components/TopBar';\nimport { melhoriasAPI, equipamentosAPI } from '../../lib/api';\nimport { usePermissions } from '../../hooks/usePermissions';\n\ninterface Melhoria {\n  id: string;\n  titulo: string;\n  descricao?: string;\n  equipamento_id?: string;\n  setor?: string;\n  tipo: string;\n  prioridade: string;\n  status: string;\n  custo_estimado?: number;\n  economia_estimada?: number;\n  categoria_investimento: string;\n  roi_estimado?: number;\n  payback_meses?: number;\n  responsavel?: string;\n  data_criacao: string;\n  data_implementacao?: string;\n  observacoes?: string;\n  equipamentos?: { nome: string };\n}\n\nexport default function MelhoriasPage() {\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [darkMode, setDarkMode] = useState(false);\n  const [melhorias, setMelhorias] = useState<Melhoria[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('');\n  const [filterTipo, setFilterTipo] = useState('');\n  const [filterCategoria, setFilterCategoria] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [editingMelhoria, setEditingMelhoria] = useState<Melhoria | null>(null);\n  const { canCreate, canEdit, canDelete } = usePermissions();\n\n  // Form state\n  const [formData, setFormData] = useState({\n    titulo: '',\n    descricao: '',\n    equipamento_id: '',\n    setor: '',\n    tipo: 'Efici√™ncia',\n    prioridade: 'M√©dia',\n    status: 'Proposta',\n    custo_estimado: 0,\n    economia_estimada: 0,\n    categoria_investimento: 'CAPEX',\n    roi_estimado: 0,\n    payback_meses: 0,\n    responsavel: '',\n    data_criacao: new Date().toISOString().split('T')[0],\n    data_implementacao: '',\n    observacoes: ''\n  });\n\n  const [equipamentos, setEquipamentos] = useState<any[]>([]);\n\n  useEffect(() => {\n    if (darkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [darkMode]);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      const [melhoriasData, equipamentosData] = await Promise.all([\n        melhoriasAPI.getAll(),\n        equipamentosAPI.getAll()\n      ]);\n      setMelhorias(melhoriasData || []);\n      setEquipamentos(equipamentosData || []);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      // C√°lculos autom√°ticos de ROI e Payback\n      let roiCalculado = 0;\n      let paybackCalculado = 0;\n\n      if (formData.custo_estimado > 0 && formData.economia_estimada > 0) {\n        // ROI = (Economia - Custo) / Custo * 100\n        roiCalculado = ((formData.economia_estimada - formData.custo_estimado) / formData.custo_estimado) * 100;\n        \n        // Payback em meses = Custo / (Economia / 12)\n        const economiaMensal = formData.economia_estimada / 12;\n        paybackCalculado = Math.ceil(formData.custo_estimado / economiaMensal);\n      }\n\n      // Classifica√ß√£o autom√°tica CAPEX/OPEX\n      let categoriaAuto = formData.categoria_investimento;\n      if (formData.custo_estimado > 10000) {\n        categoriaAuto = 'CAPEX';\n      } else if (formData.tipo === 'Efici√™ncia' || formData.tipo === 'Produtividade') {\n        categoriaAuto = 'OPEX';\n      }\n\n      const melhoriaData = {\n        ...formData,\n        categoria_investimento: categoriaAuto,\n        roi_estimado: roiCalculado,\n        payback_meses: paybackCalculado,\n        equipamento_id: formData.equipamento_id || null,\n        data_implementacao: formData.data_implementacao || null\n      };\n\n      if (editingMelhoria) {\n        await melhoriasAPI.update(editingMelhoria.id, melhoriaData);\n      } else {\n        await melhoriasAPI.create(melhoriaData);\n      }\n\n      setShowModal(false);\n      setEditingMelhoria(null);\n      resetForm();\n      loadData();\n    } catch (error) {\n      console.error('Erro ao salvar melhoria:', error);\n      alert('Erro ao salvar melhoria');\n    }\n  };\n\n  const handleEdit = (melhoria: Melhoria) => {\n    setEditingMelhoria(melhoria);\n    setFormData({\n      titulo: melhoria.titulo,\n      descricao: melhoria.descricao || '',\n      equipamento_id: melhoria.equipamento_id || '',\n      setor: melhoria.setor || '',\n      tipo: melhoria.tipo,\n      prioridade: melhoria.prioridade,\n      status: melhoria.status,\n      custo_estimado: melhoria.custo_estimado || 0,\n      economia_estimada: melhoria.economia_estimada || 0,\n      categoria_investimento: melhoria.categoria_investimento,\n      roi_estimado: melhoria.roi_estimado || 0,\n      payback_meses: melhoria.payback_meses || 0,\n      responsavel: melhoria.responsavel || '',\n      data_criacao: melhoria.data_criacao,\n      data_implementacao: melhoria.data_implementacao || '',\n      observacoes: melhoria.observacoes || ''\n    });\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Tem certeza que deseja excluir esta melhoria?')) return;\n    try {\n      await melhoriasAPI.delete(id);\n      loadData();\n    } catch (error) {\n      console.error('Erro ao excluir melhoria:', error);\n      alert('Erro ao excluir melhoria');\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      titulo: '',\n      descricao: '',\n      equipamento_id: '',\n      setor: '',\n      tipo: 'Efici√™ncia',\n      prioridade: 'M√©dia',\n      status: 'Proposta',\n      custo_estimado: 0,\n      economia_estimada: 0,\n      categoria_investimento: 'CAPEX',\n      roi_estimado: 0,\n      payback_meses: 0,\n      responsavel: '',\n      data_criacao: new Date().toISOString().split('T')[0],\n      data_implementacao: '',\n      observacoes: ''\n    });\n  };\n\n  const filteredMelhorias = melhorias.filter(melhoria => {\n    const matchSearch = \n      melhoria.titulo.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      melhoria.descricao?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      melhoria.setor?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchStatus = !filterStatus || melhoria.status === filterStatus;\n    const matchTipo = !filterTipo || melhoria.tipo === filterTipo;\n    const matchCategoria = !filterCategoria || melhoria.categoria_investimento === filterCategoria;\n    \n    return matchSearch && matchStatus && matchTipo && matchCategoria;\n  });\n\n  const tipos = ['Efici√™ncia', 'Seguran√ßa', 'Qualidade', 'Custo', 'Produtividade', 'Outro'];\n  const prioridades = ['Baixa', 'M√©dia', 'Alta', 'Cr√≠tica'];\n  const statusList = ['Proposta', 'Em An√°lise', 'Aprovada', 'Em Implementa√ß√£o', 'Conclu√≠da', 'Rejeitada'];\n\n  const getStatusColor = (status: string) => {\n    const colors: Record<string, string> = {\n      'Proposta': 'bg-gray-100 text-gray-800',\n      'Em An√°lise': 'bg-blue-100 text-blue-800',\n      'Aprovada': 'bg-green-100 text-green-800',\n      'Em Implementa√ß√£o': 'bg-yellow-100 text-yellow-800',\n      'Conclu√≠da': 'bg-emerald-100 text-emerald-800',\n      'Rejeitada': 'bg-red-100 text-red-800'\n    };\n    return colors[status] || 'bg-gray-100 text-gray-800';\n  };\n\n  const getPrioridadeColor = (prioridade: string) => {\n    const colors: Record<string, string> = {\n      'Baixa': 'bg-blue-100 text-blue-800',\n      'M√©dia': 'bg-yellow-100 text-yellow-800',\n      'Alta': 'bg-orange-100 text-orange-800',\n      'Cr√≠tica': 'bg-red-100 text-red-800'\n    };\n    return colors[prioridade] || 'bg-gray-100 text-gray-800';\n  };\n\n  const totalCAPEX = filteredMelhorias.filter(m => m.categoria_investimento === 'CAPEX').reduce((sum, m) => sum + (m.custo_estimado || 0), 0);\n  const totalOPEX = filteredMelhorias.filter(m => m.categoria_investimento === 'OPEX').reduce((sum, m) => sum + (m.custo_estimado || 0), 0);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex\">\n      <Sidebar isOpen={sidebarOpen} onToggle={() => setSidebarOpen(!sidebarOpen)} darkMode={darkMode} />\n      \n      <div className={`flex-1 flex flex-col transition-all duration-300 ${sidebarOpen ? 'ml-64' : 'ml-20'}`}>\n        <TopBar darkMode={darkMode} setDarkMode={setDarkMode} />\n        <main className=\"flex-1 overflow-y-auto p-6 bg-gray-50\">\n          {/* Header */}\n          <div className=\"mb-6\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Gest√£o de Melhorias com CAPEX/OPEX</h1>\n            <p className=\"text-gray-600\">Propostas e implementa√ß√µes com an√°lise de ROI e Payback</p>\n          </div>\n\n          {/* Stats Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6\">\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-100\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-gray-600 text-sm\">Total de Melhorias</span>\n                <i className=\"ri-lightbulb-line text-2xl text-yellow-500\"></i>\n              </div>\n              <p className=\"text-2xl font-bold text-gray-900\">{melhorias.length}</p>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-100\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-gray-600 text-sm\">CAPEX Total</span>\n                <i className=\"ri-funds-line text-2xl text-blue-500\"></i>\n              </div>\n              <p className=\"text-2xl font-bold text-blue-600\">\n                R$ {totalCAPEX.toLocaleString('pt-BR')}\n              </p>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-100\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-gray-600 text-sm\">OPEX Total</span>\n                <i className=\"ri-line-chart-line text-2xl text-orange-500\"></i>\n              </div>\n              <p className=\"text-2xl font-bold text-orange-600\">\n                R$ {totalOPEX.toLocaleString('pt-BR')}\n              </p>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-100\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-gray-600 text-sm\">Conclu√≠das</span>\n                <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\n              </div>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {melhorias.filter(m => m.status === 'Conclu√≠da').length}\n              </p>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-100\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-gray-600 text-sm\">Economia Estimada</span>\n                <i className=\"ri-money-dollar-circle-line text-2xl text-emerald-500\"></i>\n              </div>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                R$ {melhorias.reduce((sum, m) => sum + (m.economia_estimada || 0), 0).toLocaleString('pt-BR')}\n              </p>\n            </div>\n          </div>\n\n          {/* Filters and Actions */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-100\">\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Buscar</label>\n                <div className=\"relative\">\n                  <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n                  <input\n                    type=\"text\"\n                    placeholder=\"T√≠tulo, descri√ß√£o...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Status</label>\n                <select\n                  value={filterStatus}\n                  onChange={(e) => setFilterStatus(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8\"\n                >\n                  <option value=\"\">Todos os status</option>\n                  {statusList.map(status => (\n                    <option key={status} value={status}>{status}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Tipo</label>\n                <select\n                  value={filterTipo}\n                  onChange={(e) => setFilterTipo(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8\"\n                >\n                  <option value=\"\">Todos os tipos</option>\n                  {tipos.map(tipo => (\n                    <option key={tipo} value={tipo}>{tipo}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Categoria</label>\n                <select\n                  value={filterCategoria}\n                  onChange={(e) => setFilterCategoria(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8\"\n                >\n                  <option value=\"\">Todas</option>\n                  <option value=\"CAPEX\">CAPEX</option>\n                  <option value=\"OPEX\">OPEX</option>\n                </select>\n              </div>\n\n              <div className=\"flex items-end\">\n                <button\n                  onClick={() => {\n                    setEditingMelhoria(null);\n                    resetForm();\n                    setShowModal(true);\n                  }}\n                  className=\"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white px-6 py-2 rounded-lg hover:from-purple-600 hover:to-pink-700 transition-all duration-200 font-medium whitespace-nowrap flex items-center justify-center gap-2 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line text-xl\"></i>\n                  Nova Melhoria\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Cards Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {loading ? (\n              <div className=\"col-span-full flex items-center justify-center py-12\">\n                <i className=\"ri-loader-4-line text-4xl text-gray-400 animate-spin\"></i>\n              </div>\n            ) : filteredMelhorias.length === 0 ? (\n              <div className=\"col-span-full text-center py-12\">\n                <i className=\"ri-lightbulb-line text-6xl text-gray-300 mb-4\"></i>\n                <p className=\"text-gray-500\">Nenhuma melhoria encontrada</p>\n              </div>\n            ) : (\n              filteredMelhorias.map((melhoria) => (\n                <div key={melhoria.id} className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{melhoria.titulo}</h3>\n                      <div className=\"flex flex-wrap gap-2 mb-3\">\n                        <span className={`px-3 py-1 text-xs font-medium rounded-full ${getStatusColor(melhoria.status)}`}>\n                          {melhoria.status}\n                        </span>\n                        <span className={`px-3 py-1 text-xs font-medium rounded-full ${getPrioridadeColor(melhoria.prioridade)}`}>\n                          {melhoria.prioridade}\n                        </span>\n                        <span className=\"px-3 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800\">\n                          {melhoria.tipo}\n                        </span>\n                        <span className={`px-3 py-1 text-xs font-bold rounded-full ${\n                          melhoria.categoria_investimento === 'CAPEX' \n                            ? 'bg-blue-500 text-white' \n                            : 'bg-orange-500 text-white'\n                        }`}>\n                          {melhoria.categoria_investimento}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {melhoria.descricao && (\n                    <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{melhoria.descricao}</p>\n                  )}\n\n                  <div className=\"space-y-2 mb-4\">\n                    {melhoria.equipamentos?.nome && (\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <i className=\"ri-settings-3-line\"></i>\n                        <span>{melhoria.equipamentos.nome}</span>\n                      </div>\n                    )}\n                    {melhoria.setor && (\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <i className=\"ri-building-line\"></i>\n                        <span>{melhoria.setor}</span>\n                      </div>\n                    )}\n                    {melhoria.responsavel && (\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <i className=\"ri-user-line\"></i>\n                        <span>{melhoria.responsavel}</span>\n                      </div>\n                    )}\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                      <i className=\"ri-calendar-line\"></i>\n                      <span>{new Date(melhoria.data_criacao).toLocaleDateString('pt-BR')}</span>\n                    </div>\n                  </div>\n\n                  {/* An√°lise Financeira */}\n                  <div className=\"grid grid-cols-2 gap-3 mb-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200\">\n                    {melhoria.custo_estimado > 0 && (\n                      <div>\n                        <p className=\"text-xs text-gray-600 mb-1\">Custo</p>\n                        <p className=\"text-sm font-semibold text-red-600\">\n                          R$ {melhoria.custo_estimado.toLocaleString('pt-BR')}\n                        </p>\n                      </div>\n                    )}\n                    {melhoria.economia_estimada > 0 && (\n                      <div>\n                        <p className=\"text-xs text-gray-600 mb-1\">Economia</p>\n                        <p className=\"text-sm font-semibold text-green-600\">\n                          R$ {melhoria.economia_estimada.toLocaleString('pt-BR')}\n                        </p>\n                      </div>\n                    )}\n                    {melhoria.roi_estimado !== undefined && melhoria.roi_estimado !== null && melhoria.roi_estimado !== 0 && (\n                      <div>\n                        <p className=\"text-xs text-gray-600 mb-1\">ROI</p>\n                        <p className={`text-sm font-semibold ${melhoria.roi_estimado > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                          {melhoria.roi_estimado.toFixed(1)}%\n                        </p>\n                      </div>\n                    )}\n                    {melhoria.payback_meses !== undefined && melhoria.payback_meses !== null && melhoria.payback_meses > 0 && (\n                      <div>\n                        <p className=\"text-xs text-gray-600 mb-1\">Payback</p>\n                        <p className=\"text-sm font-semibold text-blue-600\">\n                          {melhoria.payback_meses} meses\n                        </p>\n                      </div>\n                    )}\n                  </div>\n\n                  {(canEdit || canDelete) && (\n                    <div className=\"flex gap-2 pt-4 border-t border-gray-100\">\n                      {canEdit && (\n                        <button\n                          onClick={() => handleEdit(melhoria)}\n                          className=\"flex-1 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors font-medium whitespace-nowrap flex items-center justify-center gap-2\"\n                        >\n                          <i className=\"ri-edit-line\"></i>\n                          Editar\n                        </button>\n                      )}\n                      {canDelete && (\n                        <button\n                          onClick={() => handleDelete(melhoria.id)}\n                          className=\"px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors font-medium whitespace-nowrap flex items-center justify-center gap-2\"\n                        >\n                          <i className=\"ri-delete-bin-line\"></i>\n                          Excluir\n                        </button>\n                      )}\n                    </div>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n        </main>\n      </div>\n\n      {/* Modal */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"bg-gradient-to-r from-purple-500 to-pink-600 p-6 rounded-t-2xl\">\n              <h2 className=\"text-2xl font-bold text-white\">\n                {editingMelhoria ? 'Editar Melhoria' : 'Nova Melhoria'}\n              </h2>\n              <p className=\"text-purple-100 text-sm mt-1\">ROI e Payback calculados automaticamente</p>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    T√≠tulo *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.titulo}\n                    onChange={(e) => setFormData({ ...formData, titulo: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Descri√ß√£o\n                  </label>\n                  <textarea\n                    value={formData.descricao}\n                    onChange={(e) => setFormData({ ...formData, descricao: e.target.value })}\n                    rows={3}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Tipo *\n                  </label>\n                  <select\n                    value={formData.tipo}\n                    onChange={(e) => setFormData({ ...formData, tipo: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    required\n                  >\n                    {tipos.map(tipo => (\n                      <option key={tipo} value={tipo}>{tipo}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Prioridade *\n                  </label>\n                  <select\n                    value={formData.prioridade}\n                    onChange={(e) => setFormData({ ...formData, prioridade: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    required\n                  >\n                    {prioridades.map(prioridade => (\n                      <option key={prioridade} value={prioridade}>{prioridade}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Status *\n                  </label>\n                  <select\n                    value={formData.status}\n                    onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    required\n                  >\n                    {statusList.map(status => (\n                      <option key={status} value={status}>{status}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Equipamento\n                  </label>\n                  <select\n                    value={formData.equipamento_id}\n                    onChange={(e) => setFormData({ ...formData, equipamento_id: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">Selecione...</option>\n                    {equipamentos.map(eq => (\n                      <option key={eq.id} value={eq.id}>{eq.nome}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Setor\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.setor}\n                    onChange={(e) => setFormData({ ...formData, setor: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Respons√°vel\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.responsavel}\n                    onChange={(e) => setFormData({ ...formData, responsavel: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Custo Estimado (R$)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    value={formData.custo_estimado}\n                    onChange={(e) => setFormData({ ...formData, custo_estimado: parseFloat(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Economia Estimada (R$)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    value={formData.economia_estimada}\n                    onChange={(e) => setFormData({ ...formData, economia_estimada: parseFloat(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Data de Cria√ß√£o *\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={formData.data_criacao}\n                    onChange={(e) => setFormData({ ...formData, data_criacao: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Data de Implementa√ß√£o\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={formData.data_implementacao}\n                    onChange={(e) => setFormData({ ...formData, data_implementacao: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Observa√ß√µes\n                  </label>\n                  <textarea\n                    value={formData.observacoes}\n                    onChange={(e) => setFormData({ ...formData, observacoes: e.target.value })}\n                    rows={3}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Categoria de Investimento *\n                  </label>\n                  <select\n                    value={formData.categoria_investimento}\n                    onChange={(e) => setFormData({ ...formData, categoria_investimento: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    required\n                  >\n                    <option value=\"CAPEX\">CAPEX - Investimento de Capital</option>\n                    <option value=\"OPEX\">OPEX - Despesa Operacional</option>\n                  </select>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    üí° Classificado automaticamente baseado no valor e tipo\n                  </p>\n                </div>\n              </div>\n\n              {/* An√°lise Financeira Preview */}\n              {formData.custo_estimado > 0 && formData.economia_estimada > 0 && (\n                <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg mb-6 border border-blue-200\">\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">üìä An√°lise Financeira Autom√°tica</h3>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">ROI Estimado</p>\n                      <p className={`text-lg font-bold ${\n                        ((formData.economia_estimada - formData.custo_estimado) / formData.custo_estimado) * 100 > 0 \n                          ? 'text-green-600' \n                          : 'text-red-600'\n                      }`}>\n                        {(((formData.economia_estimada - formData.custo_estimado) / formData.custo_estimado) * 100).toFixed(1)}%\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Payback</p>\n                      <p className=\"text-lg font-bold text-blue-600\">\n                        {Math.ceil(formData.custo_estimado / (formData.economia_estimada / 12))} meses\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Categoria</p>\n                      <span className={`px-3 py-1 text-xs font-bold rounded-full ${\n                        formData.custo_estimado > 10000 ? 'bg-blue-500 text-white' : 'bg-orange-500 text-white'\n                      }`}>\n                        {formData.custo_estimado > 10000 ? 'CAPEX' : 'OPEX'}\n                      </span>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Retorno L√≠quido</p>\n                      <p className=\"text-lg font-bold text-emerald-600\">\n                        R$ {(formData.economia_estimada - formData.custo_estimado).toLocaleString('pt-BR')}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowModal(false);\n                    setEditingMelhoria(null);\n                    resetForm();\n                  }}\n                  className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-700 transition-all duration-200 font-medium whitespace-nowrap\"\n                >\n                  {editingMelhoria ? 'Atualizar' : 'Criar'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["MelhoriasPage","sidebarOpen","setSidebarOpen","useState","darkMode","setDarkMode","melhorias","setMelhorias","loading","setLoading","searchTerm","setSearchTerm","filterStatus","setFilterStatus","filterTipo","setFilterTipo","filterCategoria","setFilterCategoria","showModal","setShowModal","editingMelhoria","setEditingMelhoria","canEdit","canDelete","usePermissions","formData","setFormData","equipamentos","setEquipamentos","useEffect","loadData","melhoriasData","equipamentosData","melhoriasAPI","equipamentosAPI","error","handleSubmit","e","roiCalculado","paybackCalculado","economiaMensal","categoriaAuto","melhoriaData","resetForm","handleEdit","melhoria","handleDelete","id","filteredMelhorias","matchSearch","_a","_b","matchStatus","matchTipo","matchCategoria","tipos","prioridades","statusList","getStatusColor","status","getPrioridadeColor","prioridade","totalCAPEX","m","sum","totalOPEX","jsxs","jsx","Sidebar","TopBar","tipo","eq"],"mappings":"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"}