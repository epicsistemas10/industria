import{r as x,s as n,j as e}from"./index-FRp6wVcD.js";const _={common:{save:"Salvar",cancel:"Cancelar",delete:"Excluir",edit:"Editar",create:"Criar",search:"Buscar",filter:"Filtrar",loading:"Carregando...",noData:"Nenhum dado dispon√≠vel",confirm:"Confirmar",back:"Voltar",next:"Pr√≥ximo",previous:"Anterior",close:"Fechar",yes:"Sim",no:"N√£o",all:"Todos",actions:"A√ß√µes",details:"Detalhes",status:"Status",date:"Data",description:"Descri√ß√£o",name:"Nome",type:"Tipo",priority:"Prioridade",cost:"Custo",total:"Total"},auth:{login:"Entrar",logout:"Sair",email:"E-mail",password:"Senha",forgotPassword:"Esqueceu a senha?",rememberMe:"Lembrar-me",loginError:"Erro ao fazer login",invalidCredentials:"Credenciais inv√°lidas"},dashboard:{title:"Painel de Controle",welcome:"Bem-vindo",overview:"Vis√£o Geral",statistics:"Estat√≠sticas",recentActivity:"Atividade Recente"},equipment:{title:"Equipamentos",new:"Novo Equipamento",edit:"Editar Equipamento",delete:"Excluir Equipamento",name:"Nome do Equipamento",sector:"Setor",manufacturer:"Fabricante",model:"Modelo",year:"Ano de Fabrica√ß√£o",criticality:"Criticidade",status:"Status",operational:"Operacional",maintenance:"Em Manuten√ß√£o",stopped:"Parado",alert:"Alerta",low:"Baixa",medium:"M√©dia",high:"Alta",critical:"Cr√≠tica"},workOrder:{title:"Ordens de Servi√ßo",new:"Nova Ordem de Servi√ßo",edit:"Editar Ordem de Servi√ßo",number:"N√∫mero",equipment:"Equipamento",priority:"Prioridade",status:"Status",open:"Aberta",inProgress:"Em Andamento",paused:"Pausada",completed:"Conclu√≠da",cancelled:"Cancelada",urgent:"Urgente",responsible:"Respons√°vel",team:"Equipe",estimatedCost:"Custo Estimado",actualCost:"Custo Real"},components:{title:"Componentes",new:"Novo Componente",edit:"Editar Componente",code:"C√≥digo",brand:"Marca",stock:"Estoque",minStock:"Estoque M√≠nimo",unitPrice:"Pre√ßo Unit√°rio"},reports:{title:"Relat√≥rios",generate:"Gerar Relat√≥rio",export:"Exportar",pdf:"Exportar PDF",excel:"Exportar Excel",period:"Per√≠odo",consolidated:"Relat√≥rio Consolidado"},predictions:{title:"Previs√£o de Falhas",probability:"Probabilidade de Falha",daysUntilFailure:"Dias at√© Falha",confidence:"Confian√ßa",riskFactors:"Fatores de Risco",recommendations:"Recomenda√ß√µes",highRisk:"Alto Risco",mediumRisk:"M√©dio Risco",lowRisk:"Baixo Risco",criticalRisk:"Risco Cr√≠tico"}},I={common:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",search:"Search",filter:"Filter",loading:"Loading...",noData:"No data available",confirm:"Confirm",back:"Back",next:"Next",previous:"Previous",close:"Close",yes:"Yes",no:"No",all:"All",actions:"Actions",details:"Details",status:"Status",date:"Date",description:"Description",name:"Name",type:"Type",priority:"Priority",cost:"Cost",total:"Total"},auth:{login:"Login",logout:"Logout",email:"Email",password:"Password",forgotPassword:"Forgot password?",rememberMe:"Remember me",loginError:"Login error",invalidCredentials:"Invalid credentials"},dashboard:{title:"Dashboard",welcome:"Welcome",overview:"Overview",statistics:"Statistics",recentActivity:"Recent Activity"},equipment:{title:"Equipment",new:"New Equipment",edit:"Edit Equipment",delete:"Delete Equipment",name:"Equipment Name",sector:"Sector",manufacturer:"Manufacturer",model:"Model",year:"Manufacturing Year",criticality:"Criticality",status:"Status",operational:"Operational",maintenance:"Under Maintenance",stopped:"Stopped",alert:"Alert",low:"Low",medium:"Medium",high:"High",critical:"Critical"},workOrder:{title:"Work Orders",new:"New Work Order",edit:"Edit Work Order",number:"Number",equipment:"Equipment",priority:"Priority",status:"Status",open:"Open",inProgress:"In Progress",paused:"Paused",completed:"Completed",cancelled:"Cancelled",urgent:"Urgent",responsible:"Responsible",team:"Team",estimatedCost:"Estimated Cost",actualCost:"Actual Cost"},components:{title:"Components",new:"New Component",edit:"Edit Component",code:"Code",brand:"Brand",stock:"Stock",minStock:"Minimum Stock",unitPrice:"Unit Price"},reports:{title:"Reports",generate:"Generate Report",export:"Export",pdf:"Export PDF",excel:"Export Excel",period:"Period",consolidated:"Consolidated Report"},predictions:{title:"Failure Prediction",probability:"Failure Probability",daysUntilFailure:"Days Until Failure",confidence:"Confidence",riskFactors:"Risk Factors",recommendations:"Recommendations",highRisk:"High Risk",mediumRisk:"Medium Risk",lowRisk:"Low Risk",criticalRisk:"Critical Risk"}},$={common:{save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",create:"Crear",search:"Buscar",filter:"Filtrar",loading:"Cargando...",noData:"No hay datos disponibles",confirm:"Confirmar",back:"Volver",next:"Siguiente",previous:"Anterior",close:"Cerrar",yes:"S√≠",no:"No",all:"Todos",actions:"Acciones",details:"Detalles",status:"Estado",date:"Fecha",description:"Descripci√≥n",name:"Nombre",type:"Tipo",priority:"Prioridad",cost:"Costo",total:"Total"},auth:{login:"Iniciar sesi√≥n",logout:"Cerrar sesi√≥n",email:"Correo electr√≥nico",password:"Contrase√±a",forgotPassword:"¬øOlvid√≥ su contrase√±a?",rememberMe:"Recu√©rdame",loginError:"Error al iniciar sesi√≥n",invalidCredentials:"Credenciales inv√°lidas"},dashboard:{title:"Panel de Control",welcome:"Bienvenido",overview:"Resumen",statistics:"Estad√≠sticas",recentActivity:"Actividad Reciente"},equipment:{title:"Equipos",new:"Nuevo Equipo",edit:"Editar Equipo",delete:"Eliminar Equipo",name:"Nombre del Equipo",sector:"Sector",manufacturer:"Fabricante",model:"Modelo",year:"A√±o de Fabricaci√≥n",criticality:"Criticidad",status:"Estado",operational:"Operacional",maintenance:"En Mantenimiento",stopped:"Detenido",alert:"Alerta",low:"Baja",medium:"Media",high:"Alta",critical:"Cr√≠tica"},workOrder:{title:"√ìrdenes de Servicio",new:"Nueva Orden de Servicio",edit:"Editar Orden de Servicio",number:"N√∫mero",equipment:"Equipo",priority:"Prioridad",status:"Estado",open:"Abierta",inProgress:"En Progreso",paused:"Pausada",completed:"Completada",cancelled:"Cancelada",urgent:"Urgente",responsible:"Responsable",team:"Equipo",estimatedCost:"Costo Estimado",actualCost:"Costo Real"},components:{title:"Componentes",new:"Nuevo Componente",edit:"Editar Componente",code:"C√≥digo",brand:"Marca",stock:"Stock",minStock:"Stock M√≠nimo",unitPrice:"Precio Unitario"},reports:{title:"Informes",generate:"Generar Informe",export:"Exportar",pdf:"Exportar PDF",excel:"Exportar Excel",period:"Per√≠odo",consolidated:"Informe Consolidado"},predictions:{title:"Predicci√≥n de Fallas",probability:"Probabilidad de Falla",daysUntilFailure:"D√≠as hasta Falla",confidence:"Confianza",riskFactors:"Factores de Riesgo",recommendations:"Recomendaciones",highRisk:"Alto Riesgo",mediumRisk:"Riesgo Medio",lowRisk:"Bajo Riesgo",criticalRisk:"Riesgo Cr√≠tico"}},P=[{code:"pt-BR",name:"Portugu√™s (Brasil)",flag:"üáßüá∑",translations:_},{code:"en-US",name:"English (US)",flag:"üá∫üá∏",translations:I},{code:"es-ES",name:"Espa√±ol",flag:"üá™üá∏",translations:$}];function U(h="pt-BR"){const p=P.find(o=>o.code===h)||P[0];return{t:o=>{const d=o.split(".");let r=p.translations;for(const g of d)if(r&&typeof r=="object")r=r[g];else return o;return typeof r=="string"?r:o},language:p}}function G(){U();const[h,p]=x.useState([]),[w,o]=x.useState(!0),[d,r]=x.useState("30d");x.useEffect(()=>{g();const t=setInterval(g,6e4);return()=>clearInterval(t)},[d]);const g=async()=>{try{const t=new Date;d==="7d"?t.setDate(t.getDate()-7):d==="30d"?t.setDate(t.getDate()-30):t.setDate(t.getDate()-90);const{data:s}=await n.from("equipamentos").select("status"),C=(s==null?void 0:s.length)||0,k=(s==null?void 0:s.filter(a=>a.status==="operacional").length)||0,D=C>0?k/C*100:0,{data:b}=await n.from("ordens_servico").select("data_abertura, data_conclusao").eq("status","concluida").gte("data_conclusao",t.toISOString());let N=0;if(b&&b.length>0){const a=b.map(i=>{const l=new Date(i.data_abertura).getTime();return(new Date(i.data_conclusao).getTime()-l)/36e5});N=a.reduce((i,l)=>i+l,0)/a.length}const{data:u}=await n.from("historico_revisoes").select("data_revisao").gte("data_revisao",t.toISOString()).order("data_revisao",{ascending:!0});let j=0;if(u&&u.length>1){const a=[];for(let i=1;i<u.length;i++){const l=new Date(u[i-1].data_revisao).getTime(),S=new Date(u[i].data_revisao).getTime();a.push((S-l)/(1e3*60*60*24))}j=a.reduce((i,l)=>i+l,0)/a.length}const{data:v}=await n.from("custos").select("valor").gte("data",t.toISOString()),F=(v==null?void 0:v.reduce((a,i)=>a+i.valor,0))||0,{data:c}=await n.from("ordens_servico").select("status").gte("data_abertura",t.toISOString()),R=(c==null?void 0:c.length)||0,q=(c==null?void 0:c.filter(a=>a.status==="concluida").length)||0,M=R>0?q/R*100:0,{data:f}=await n.from("melhorias").select("economia_estimada").eq("status","concluida").gte("data_implementacao",t.toISOString()),A=(f==null?void 0:f.reduce((a,i)=>a+(i.economia_estimada||0),0))||0,{data:E}=await n.from("ordens_servico").select("id").in("status",["aberta","em_andamento"]),T=(E==null?void 0:E.length)||0,{data:m}=await n.from("equipes").select("disponivel"),y=(m==null?void 0:m.length)||0,O=(m==null?void 0:m.filter(a=>a.disponivel).length)||0,B=y>0?O/y*100:0;p([{label:"Disponibilidade de Equipamentos",value:`${D.toFixed(1)}%`,change:2.5,trend:"up",icon:"ri-settings-3-line",color:"from-blue-500 to-cyan-500"},{label:"MTTR (Tempo M√©dio de Reparo)",value:`${N.toFixed(1)}h`,change:-5.2,trend:"down",icon:"ri-time-line",color:"from-green-500 to-emerald-500"},{label:"MTBF (Tempo M√©dio Entre Falhas)",value:`${j.toFixed(0)} dias`,change:8.3,trend:"up",icon:"ri-calendar-check-line",color:"from-purple-500 to-pink-500"},{label:"Custos de Manuten√ß√£o",value:`R$ ${F.toLocaleString("pt-BR")}`,change:-3.1,trend:"down",icon:"ri-money-dollar-circle-line",color:"from-orange-500 to-red-500"},{label:"Taxa de Conclus√£o de OS",value:`${M.toFixed(1)}%`,change:4.7,trend:"up",icon:"ri-checkbox-circle-line",color:"from-teal-500 to-cyan-500"},{label:"Economia com Melhorias",value:`R$ ${A.toLocaleString("pt-BR")}`,change:12.5,trend:"up",icon:"ri-lightbulb-line",color:"from-yellow-500 to-orange-500"},{label:"Backlog de Manuten√ß√£o",value:T,change:-2.8,trend:"down",icon:"ri-file-list-3-line",color:"from-red-500 to-pink-500"},{label:"Efici√™ncia da Equipe",value:`${B.toFixed(1)}%`,change:3.2,trend:"up",icon:"ri-team-line",color:"from-indigo-500 to-purple-500"}]),o(!1)}catch(t){console.error("Erro ao carregar KPIs:",t),o(!1)}};return w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-xl",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Carregando KPIs..."]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[e.jsx("i",{className:"ri-dashboard-line mr-3"}),"Dashboard Executivo"]}),e.jsx("p",{className:"text-slate-400",children:"Indicadores-chave de desempenho em tempo real"})]}),e.jsx("div",{className:"flex gap-2",children:["7d","30d","90d"].map(t=>e.jsx("button",{onClick:()=>r(t),className:`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${d===t?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:t==="7d"?"7 Dias":t==="30d"?"30 Dias":"90 Dias"},t))})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((t,s)=>e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50 hover:border-slate-600 transition-all hover:shadow-xl hover:shadow-blue-500/10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${t.color} flex items-center justify-center`,children:e.jsx("i",{className:`${t.icon} text-2xl text-white`})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${t.trend==="up"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[e.jsx("i",{className:`${t.trend==="up"?"ri-arrow-up-line":"ri-arrow-down-line"} text-sm`}),e.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(t.change),"%"]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:t.value}),e.jsx("div",{className:"text-sm text-slate-400",children:t.label})]}),typeof t.value=="string"&&t.value.includes("%")&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${t.color} transition-all duration-500`,style:{width:t.value}})})})]},s))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[e.jsx("i",{className:"ri-line-chart-line mr-2"}),"Tend√™ncia de Disponibilidade"]}),e.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:e.jsx("i",{className:"ri-bar-chart-box-line text-6xl"})})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[e.jsx("i",{className:"ri-pie-chart-line mr-2"}),"Distribui√ß√£o de Custos"]}),e.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:e.jsx("i",{className:"ri-donut-chart-line text-6xl"})})]})]}),e.jsxs("div",{className:"mt-8 bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[e.jsx("i",{className:"ri-alarm-warning-line mr-2"}),"Alertas e Recomenda√ß√µes"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[e.jsx("i",{className:"ri-error-warning-line text-2xl text-red-400 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-400",children:"Backlog Elevado"}),e.jsx("div",{className:"text-sm text-slate-400",children:"O backlog de manuten√ß√£o est√° acima do ideal. Considere alocar mais recursos."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[e.jsx("i",{className:"ri-alert-line text-2xl text-yellow-400 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-400",children:"MTTR em Aumento"}),e.jsx("div",{className:"text-sm text-slate-400",children:"O tempo m√©dio de reparo aumentou 5.2%. Revise os processos de manuten√ß√£o."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-500/10 border border-green-500/30 rounded-lg",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-400 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-400",children:"Economia Significativa"}),e.jsx("div",{className:"text-sm text-slate-400",children:"As melhorias implementadas geraram 12.5% de economia. Continue investindo em otimiza√ß√µes."})]})]})]})]})]})}export{G as default};
//# sourceMappingURL=page-C6AW8tZF.js.map
