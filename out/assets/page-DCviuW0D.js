import{u as L,a as q,r as a,j as e,s as P}from"./index-FRp6wVcD.js";function F(){const i=L(),{signIn:v,user:m,loading:o}=q(),[u,N]=a.useState(""),[x,y]=a.useState(""),[l,r]=a.useState(""),[h,b]=a.useState(!1),[f,E]=a.useState(null),[n,d]=a.useState(!1),[p,c]=a.useState(""),[S,g]=a.useState(!1),[j,w]=a.useState(!1);a.useEffect(()=>{const s=localStorage.getItem("company_logo");s&&E(s)},[]),a.useEffect(()=>{m&&!o&&i("/dashboard")},[m,o,i]);const R=async s=>{s.preventDefault(),r(""),b(!0);try{await v(u,x),i("/dashboard")}catch(t){console.error("Erro ao fazer login:",t),r("Email ou senha incorretos. Verifique suas credenciais ou redefina sua senha.")}finally{b(!1)}},k=async s=>{s.preventDefault(),w(!0),r("");try{const{error:t}=await P.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/reset-password`});if(t)throw t;g(!0),setTimeout(()=>{d(!1),g(!1),c("")},5e3)}catch(t){console.error("Erro ao enviar email:",t),r("Erro ao enviar email de recuperação. Tente novamente.")}finally{w(!1)}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-xl",children:"Carregando..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-8 border border-white/20",children:[e.jsxs("div",{className:"text-center mb-8",children:[f?e.jsx("img",{src:f,alt:"Logo da Empresa",className:"h-16 mx-auto mb-4 object-contain"}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("i",{className:"ri-settings-3-line text-3xl text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sistema de Manutenção"}),e.jsx("p",{className:"text-slate-300",children:n?"Recuperar Senha":"Faça login para acessar o sistema"})]}),n?e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[S&&e.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-3 text-green-200 text-sm",children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Email de recuperação enviado! Verifique sua caixa de entrada."]}),l&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm",children:l}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email cadastrado"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-mail-line absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"email",value:p,onChange:s=>c(s.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"seu@email.com",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-emerald-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:j?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-mail-send-line"}),"Enviar Email de Recuperação"]})}),e.jsxs("button",{type:"button",onClick:()=>{d(!1),r(""),c("")},className:"w-full text-slate-300 hover:text-white transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Voltar para o login"]})]}):e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm",children:l}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-mail-line absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"email",value:u,onChange:s=>N(s.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-lock-line absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"password",value:x,onChange:s=>y(s.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-sm text-emerald-400 hover:text-emerald-300 transition-colors whitespace-nowrap",children:"Esqueceu sua senha?"})}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-emerald-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-login-box-line"}),"Entrar"]})})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-500/20 border border-blue-500/50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-200 text-center",children:[e.jsx("i",{className:"ri-information-line mr-1"}),n?"Você receberá um email com instruções para redefinir sua senha":'Problemas para acessar? Use a opção "Esqueceu sua senha?"']})})]}),e.jsx("div",{className:"text-center mt-6 text-slate-400 text-sm",children:e.jsx("p",{children:"© 2024 Sistema de Manutenção Industrial"})})]})})}export{F as default};
//# sourceMappingURL=page-DCviuW0D.js.map
