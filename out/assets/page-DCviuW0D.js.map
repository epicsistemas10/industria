{"version":3,"file":"page-DCviuW0D.js","sources":["../../src/pages/login/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase } from '../../lib/supabase';\n\nexport default function LoginPage() {\n  const navigate = useNavigate();\n  const { signIn, user, loading } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [logo, setLogo] = useState<string | null>(null);\n  const [showResetPassword, setShowResetPassword] = useState(false);\n  const [resetEmail, setResetEmail] = useState('');\n  const [resetSuccess, setResetSuccess] = useState(false);\n  const [resetLoading, setResetLoading] = useState(false);\n\n  useEffect(() => {\n    const savedLogo = localStorage.getItem('company_logo');\n    if (savedLogo) {\n      setLogo(savedLogo);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (user && !loading) {\n      navigate('/dashboard');\n    }\n  }, [user, loading, navigate]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      await signIn(email, password);\n      navigate('/dashboard');\n    } catch (err: any) {\n      console.error('Erro ao fazer login:', err);\n      setError('Email ou senha incorretos. Verifique suas credenciais ou redefina sua senha.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setResetLoading(true);\n    setError('');\n\n    try {\n      const { error } = await supabase.auth.resetPasswordForEmail(resetEmail, {\n        redirectTo: `${window.location.origin}/reset-password`,\n      });\n\n      if (error) throw error;\n\n      setResetSuccess(true);\n      setTimeout(() => {\n        setShowResetPassword(false);\n        setResetSuccess(false);\n        setResetEmail('');\n      }, 5000);\n    } catch (err: any) {\n      console.error('Erro ao enviar email:', err);\n      setError('Erro ao enviar email de recuperação. Tente novamente.');\n    } finally {\n      setResetLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center\">\n        <div className=\"text-white text-xl\">Carregando...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-8 border border-white/20\">\n          {/* Logo */}\n          <div className=\"text-center mb-8\">\n            {logo ? (\n              <img\n                src={logo}\n                alt=\"Logo da Empresa\"\n                className=\"h-16 mx-auto mb-4 object-contain\"\n              />\n            ) : (\n              <div className=\"w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl mx-auto mb-4 flex items-center justify-center\">\n                <i className=\"ri-settings-3-line text-3xl text-white\"></i>\n              </div>\n            )}\n            <h1 className=\"text-3xl font-bold text-white mb-2\">\n              Sistema de Manutenção\n            </h1>\n            <p className=\"text-slate-300\">\n              {showResetPassword ? 'Recuperar Senha' : 'Faça login para acessar o sistema'}\n            </p>\n          </div>\n\n          {/* Formulário de Reset de Senha */}\n          {showResetPassword ? (\n            <form onSubmit={handleResetPassword} className=\"space-y-6\">\n              {resetSuccess && (\n                <div className=\"bg-green-500/20 border border-green-500/50 rounded-lg p-3 text-green-200 text-sm\">\n                  <i className=\"ri-check-line mr-2\"></i>\n                  Email de recuperação enviado! Verifique sua caixa de entrada.\n                </div>\n              )}\n\n              {error && (\n                <div className=\"bg-red-500/20 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Email cadastrado\n                </label>\n                <div className=\"relative\">\n                  <i className=\"ri-mail-line absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\"></i>\n                  <input\n                    type=\"email\"\n                    value={resetEmail}\n                    onChange={(e) => setResetEmail(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent\"\n                    placeholder=\"seu@email.com\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={resetLoading}\n                className=\"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-emerald-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap\"\n              >\n                {resetLoading ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin\"></i>\n                    Enviando...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"ri-mail-send-line\"></i>\n                    Enviar Email de Recuperação\n                  </>\n                )}\n              </button>\n\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setShowResetPassword(false);\n                  setError('');\n                  setResetEmail('');\n                }}\n                className=\"w-full text-slate-300 hover:text-white transition-colors text-sm whitespace-nowrap\"\n              >\n                <i className=\"ri-arrow-left-line mr-1\"></i>\n                Voltar para o login\n              </button>\n            </form>\n          ) : (\n            // Formulário de Login\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {error && (\n                <div className=\"bg-red-500/20 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Email\n                </label>\n                <div className=\"relative\">\n                  <i className=\"ri-mail-line absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\"></i>\n                  <input\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent\"\n                    placeholder=\"seu@email.com\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Senha\n                </label>\n                <div className=\"relative\">\n                  <i className=\"ri-lock-line absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\"></i>\n                  <input\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent\"\n                    placeholder=\"••••••••\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-end\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowResetPassword(true)}\n                  className=\"text-sm text-emerald-400 hover:text-emerald-300 transition-colors whitespace-nowrap\"\n                >\n                  Esqueceu sua senha?\n                </button>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-emerald-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap\"\n              >\n                {isLoading ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin\"></i>\n                    Entrando...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"ri-login-box-line\"></i>\n                    Entrar\n                  </>\n                )}\n              </button>\n            </form>\n          )}\n\n          {/* Informações de ajuda */}\n          <div className=\"mt-6 p-4 bg-blue-500/20 border border-blue-500/50 rounded-lg\">\n            <p className=\"text-xs text-blue-200 text-center\">\n              <i className=\"ri-information-line mr-1\"></i>\n              {showResetPassword \n                ? 'Você receberá um email com instruções para redefinir sua senha'\n                : 'Problemas para acessar? Use a opção \"Esqueceu sua senha?\"'\n              }\n            </p>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"text-center mt-6 text-slate-400 text-sm\">\n          <p>© 2024 Sistema de Manutenção Industrial</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["LoginPage","navigate","useNavigate","signIn","user","loading","useAuth","email","setEmail","useState","password","setPassword","error","setError","isLoading","setIsLoading","logo","setLogo","showResetPassword","setShowResetPassword","resetEmail","setResetEmail","resetSuccess","setResetSuccess","resetLoading","setResetLoading","useEffect","savedLogo","handleSubmit","e","err","handleResetPassword","supabase","jsx","jsxs","Fragment"],"mappings":"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"}