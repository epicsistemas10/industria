var it=Object.defineProperty;var ct=(l,s,e)=>s in l?it(l,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[s]=e;var Oe=(l,s,e)=>ct(l,typeof s!="symbol"?s+"":s,e);import{g as lt,r as K,j as a}from"./index-FRp6wVcD.js";import{u as ut}from"./useToast-BdbpoN4k.js";var oe={exports:{}},Te;function dt(){return Te||(Te=1,(function(l){var s=(function(e){var c=Object.prototype,i=c.hasOwnProperty,n=Object.defineProperty||function(r,t,o){r[t]=o.value},u,f=typeof Symbol=="function"?Symbol:{},g=f.iterator||"@@iterator",E=f.asyncIterator||"@@asyncIterator",O=f.toStringTag||"@@toStringTag";function b(r,t,o){return Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{b({},"")}catch{b=function(t,o,h){return t[o]=h}}function G(r,t,o,h){var d=t&&t.prototype instanceof q?t:q,x=Object.create(d.prototype),k=new Z(h||[]);return n(x,"_invoke",{value:ee(r,o,k)}),x}e.wrap=G;function P(r,t,o){try{return{type:"normal",arg:r.call(t,o)}}catch(h){return{type:"throw",arg:h}}}var F="suspendedStart",y="suspendedYield",N="executing",M="completed",L={};function q(){}function p(){}function w(){}var _={};b(_,g,function(){return this});var W=Object.getPrototypeOf,z=W&&W(W(Q([])));z&&z!==c&&i.call(z,g)&&(_=z);var U=w.prototype=q.prototype=Object.create(_);p.prototype=w,n(U,"constructor",{value:w,configurable:!0}),n(w,"constructor",{value:p,configurable:!0}),p.displayName=b(w,O,"GeneratorFunction");function B(r){["next","throw","return"].forEach(function(t){b(r,t,function(o){return this._invoke(t,o)})})}e.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return t?t===p||(t.displayName||t.name)==="GeneratorFunction":!1},e.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,w):(r.__proto__=w,b(r,O,"GeneratorFunction")),r.prototype=Object.create(U),r},e.awrap=function(r){return{__await:r}};function H(r,t){function o(x,k,S,A){var j=P(r[x],r,k);if(j.type==="throw")A(j.arg);else{var V=j.arg,J=V.value;return J&&typeof J=="object"&&i.call(J,"__await")?t.resolve(J.__await).then(function($){o("next",$,S,A)},function($){o("throw",$,S,A)}):t.resolve(J).then(function($){V.value=$,S(V)},function($){return o("throw",$,S,A)})}}var h;function d(x,k){function S(){return new t(function(A,j){o(x,k,A,j)})}return h=h?h.then(S,S):S()}n(this,"_invoke",{value:d})}B(H.prototype),b(H.prototype,E,function(){return this}),e.AsyncIterator=H,e.async=function(r,t,o,h,d){d===void 0&&(d=Promise);var x=new H(G(r,t,o,h),d);return e.isGeneratorFunction(t)?x:x.next().then(function(k){return k.done?k.value:x.next()})};function ee(r,t,o){var h=F;return function(x,k){if(h===N)throw new Error("Generator is already running");if(h===M){if(x==="throw")throw k;return C()}for(o.method=x,o.arg=k;;){var S=o.delegate;if(S){var A=te(S,o);if(A){if(A===L)continue;return A}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(h===F)throw h=M,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);h=N;var j=P(r,t,o);if(j.type==="normal"){if(h=o.done?M:y,j.arg===L)continue;return{value:j.arg,done:o.done}}else j.type==="throw"&&(h=M,o.method="throw",o.arg=j.arg)}}}function te(r,t){var o=t.method,h=r.iterator[o];if(h===u)return t.delegate=null,o==="throw"&&r.iterator.return&&(t.method="return",t.arg=u,te(r,t),t.method==="throw")||o!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),L;var d=P(h,r.iterator,t.arg);if(d.type==="throw")return t.method="throw",t.arg=d.arg,t.delegate=null,L;var x=d.arg;if(!x)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,L;if(x.done)t[r.resultName]=x.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=u);else return x;return t.delegate=null,L}B(U),b(U,O,"Generator"),b(U,g,function(){return this}),b(U,"toString",function(){return"[object Generator]"});function ne(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function D(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function Z(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(ne,this),this.reset(!0)}e.keys=function(r){var t=Object(r),o=[];for(var h in t)o.push(h);return o.reverse(),function d(){for(;o.length;){var x=o.pop();if(x in t)return d.value=x,d.done=!1,d}return d.done=!0,d}};function Q(r){if(r){var t=r[g];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var o=-1,h=function d(){for(;++o<r.length;)if(i.call(r,o))return d.value=r[o],d.done=!1,d;return d.value=u,d.done=!0,d};return h.next=h}}return{next:C}}e.values=Q;function C(){return{value:u,done:!0}}return Z.prototype={constructor:Z,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(D),!r)for(var t in this)t.charAt(0)==="t"&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var r=this.tryEntries[0],t=r.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function o(A,j){return x.type="throw",x.arg=r,t.next=A,j&&(t.method="next",t.arg=u),!!j}for(var h=this.tryEntries.length-1;h>=0;--h){var d=this.tryEntries[h],x=d.completion;if(d.tryLoc==="root")return o("end");if(d.tryLoc<=this.prev){var k=i.call(d,"catchLoc"),S=i.call(d,"finallyLoc");if(k&&S){if(this.prev<d.catchLoc)return o(d.catchLoc,!0);if(this.prev<d.finallyLoc)return o(d.finallyLoc)}else if(k){if(this.prev<d.catchLoc)return o(d.catchLoc,!0)}else if(S){if(this.prev<d.finallyLoc)return o(d.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,t){for(var o=this.tryEntries.length-1;o>=0;--o){var h=this.tryEntries[o];if(h.tryLoc<=this.prev&&i.call(h,"finallyLoc")&&this.prev<h.finallyLoc){var d=h;break}}d&&(r==="break"||r==="continue")&&d.tryLoc<=t&&t<=d.finallyLoc&&(d=null);var x=d?d.completion:{};return x.type=r,x.arg=t,d?(this.method="next",this.next=d.finallyLoc,L):this.complete(x)},complete:function(r,t){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&t&&(this.next=t),L},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===r)return this.complete(o.completion,o.afterLoc),D(o),L}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===r){var h=o.completion;if(h.type==="throw"){var d=h.arg;D(o)}return d}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,o){return this.delegate={iterator:Q(r),resultName:t,nextLoc:o},this.method==="next"&&(this.arg=u),L}},e})(l.exports);try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}})(oe)),oe.exports}var se,Ce;function Re(){return Ce||(Ce=1,se=(l,s)=>`${l}-${s}-${Math.random().toString(16).slice(3,8)}`),se}var ie,Ae;function Xe(){if(Ae)return ie;Ae=1;const l=Re();let s=0;return ie=({id:e,action:c,payload:i={}})=>{let n=e;return typeof n>"u"&&(n=l("Job",s),s+=1),{id:n,action:c,payload:i}},ie}var X={},Ie;function ke(){if(Ie)return X;Ie=1;let l=!1;return X.logging=l,X.setLogging=s=>{l=s},X.log=(...s)=>l?console.log.apply(this,s):null,X}var ce,Pe;function ft(){if(Pe)return ce;Pe=1;const l=Xe(),{log:s}=ke(),e=Re();let c=0;return ce=()=>{const i=e("Scheduler",c),n={},u={};let f=[];c+=1;const g=()=>f.length,E=()=>Object.keys(n).length,O=()=>{if(f.length!==0){const y=Object.keys(n);for(let N=0;N<y.length;N+=1)if(typeof u[y[N]]>"u"){f[0](n[y[N]]);break}}},b=(y,N)=>new Promise((M,L)=>{const q=l({action:y,payload:N});f.push(async p=>{f.shift(),u[p.id]=q;try{M(await p[y].apply(this,[...N,q.id]))}catch(w){L(w)}finally{delete u[p.id],O()}}),s(`[${i}]: Add ${q.id} to JobQueue`),s(`[${i}]: JobQueue length=${f.length}`),O()});return{addWorker:y=>(n[y.id]=y,s(`[${i}]: Add ${y.id}`),s(`[${i}]: Number of workers=${E()}`),O(),y.id),addJob:async(y,...N)=>{if(E()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return b(y,N)},terminate:async()=>{Object.keys(n).forEach(async y=>{await n[y].terminate()}),f=[]},getQueueLen:g,getNumWorkers:E}},ce}function ht(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var le,qe;function mt(){if(qe)return le;qe=1;function l(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return le=l,le}var ue,Me;function pt(){if(Me)return ue;Me=1;const l=mt();return ue=s=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":l()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof ht=="function"&&(e.type="node"),typeof s>"u"?e:e[s]},ue}var de,_e;function gt(){if(_e)return de;_e=1;const s=pt()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return de=e=>{const c={...e};return["corePath","workerPath","langPath"].forEach(i=>{e[i]&&(c[i]=s(c[i]))}),c},de}var fe,Ue;function vt(){return Ue||(Ue=1,fe=l=>{const s=[],e=[],c=[],i=[],n=[];return l.blocks&&l.blocks.forEach(u=>{u.paragraphs.forEach(f=>{f.lines.forEach(g=>{g.words.forEach(E=>{E.symbols.forEach(O=>{n.push({...O,page:l,block:u,paragraph:f,line:g,word:E})}),i.push({...E,page:l,block:u,paragraph:f,line:g})}),c.push({...g,page:l,block:u,paragraph:f})}),e.push({...f,page:l,block:u})}),s.push({...u,page:l})}),{...l,blocks:s,paragraphs:e,lines:c,words:i,symbols:n}}),fe}var he,De;function et(){return De||(De=1,he={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),he}const xt="5.1.1",bt={version:xt};var me,Ge;function wt(){return Ge||(Ge=1,me={workerBlobURL:!0,logger:()=>{}}),me}var pe,ze;function yt(){if(ze)return pe;ze=1;const l=bt.version;return pe={...wt(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${l}/dist/worker.min.js`},pe}var ge,Fe;function Nt(){return Fe||(Fe=1,ge=({workerPath:l,workerBlobURL:s})=>{let e;if(Blob&&URL&&s){const c=new Blob([`importScripts("${l}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(c))}else e=new Worker(l);return e}),ge}var ve,We;function Et(){return We||(We=1,ve=l=>{l.terminate()}),ve}var xe,Be;function Lt(){return Be||(Be=1,xe=(l,s)=>{l.onmessage=({data:e})=>{s(e)}}),xe}var be,$e;function jt(){return $e||($e=1,be=async(l,s)=>{l.postMessage(s)}),be}var we,Ye;function St(){if(Ye)return we;Ye=1;const l=e=>new Promise((c,i)=>{const n=new FileReader;n.onload=()=>{c(n.result)},n.onerror=({target:{error:{code:u}}})=>{i(Error(`File could not be read! Code=${u}`))},n.readAsArrayBuffer(e)}),s=async e=>{let c=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?c=atob(e.split(",")[1]).split("").map(i=>i.charCodeAt(0)):c=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(c=await s(e.src)),e.tagName==="VIDEO"&&(c=await s(e.poster)),e.tagName==="CANVAS"&&await new Promise(i=>{e.toBlob(async n=>{c=await l(n),i()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const i=await e.convertToBlob();c=await l(i)}else(e instanceof File||e instanceof Blob)&&(c=await l(e));return new Uint8Array(c)};return we=s,we}var ye,He;function Rt(){if(He)return ye;He=1;const l=yt(),s=Nt(),e=Et(),c=Lt(),i=jt(),n=St();return ye={defaultOptions:l,spawnWorker:s,terminateWorker:e,onMessage:c,send:i,loadImage:n},ye}var Ne,Je;function tt(){if(Je)return Ne;Je=1;const l=gt(),s=vt(),e=Xe(),{log:c}=ke(),i=Re(),n=et(),{defaultOptions:u,spawnWorker:f,terminateWorker:g,onMessage:E,loadImage:O,send:b}=Rt();let G=0;return Ne=async(P="eng",F=n.LSTM_ONLY,y={},N={})=>{const M=i("Worker",G),{logger:L,errorHandler:q,...p}=l({...u,...y}),w={},_={},W=typeof P=="string"?P.split("+"):P;let z=F,U=N;const B=[n.DEFAULT,n.LSTM_ONLY].includes(F)&&!p.legacyCore;let H,ee;const te=new Promise((m,v)=>{ee=m,H=v}),ne=m=>{H(m.message)};let D=f(p);D.onerror=ne,G+=1;const Z=(m,v)=>{w[m]=v},Q=(m,v)=>{_[m]=v},C=({id:m,action:v,payload:R})=>new Promise((I,T)=>{c(`[${M}]: Start ${m}, action=${v}`);const Y=`${v}-${m}`;Z(Y,I),Q(Y,T),b(D,{workerId:M,jobId:m,action:v,payload:R})}),r=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),t=m=>C(e({id:m,action:"load",payload:{options:{lstmOnly:B,corePath:p.corePath,logging:p.logging}}})),o=(m,v,R)=>C(e({id:R,action:"FS",payload:{method:"writeFile",args:[m,v]}})),h=(m,v)=>C(e({id:v,action:"FS",payload:{method:"readFile",args:[m,{encoding:"utf8"}]}})),d=(m,v)=>C(e({id:v,action:"FS",payload:{method:"unlink",args:[m]}})),x=(m,v,R)=>C(e({id:R,action:"FS",payload:{method:m,args:v}})),k=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),S=(m,v)=>C(e({id:v,action:"loadLanguage",payload:{langs:m,options:{langPath:p.langPath,dataPath:p.dataPath,cachePath:p.cachePath,cacheMethod:p.cacheMethod,gzip:p.gzip,lstmOnly:[n.DEFAULT,n.LSTM_ONLY].includes(z)&&!p.legacyLang}}})),A=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),j=(m,v,R,I)=>C(e({id:I,action:"initialize",payload:{langs:m,oem:v,config:R}})),V=(m="eng",v,R,I)=>{if(B&&[n.TESSERACT_ONLY,n.TESSERACT_LSTM_COMBINED].includes(v))throw Error("Legacy model requested but code missing.");const T=v||z;z=T;const Y=R||U;U=Y;const ae=(typeof m=="string"?m.split("+"):m).filter(st=>!W.includes(st));return W.push(...ae),ae.length>0?S(ae,I).then(()=>j(m,T,Y,I)):j(m,T,Y,I)},J=(m={},v)=>C(e({id:v,action:"setParameters",payload:{params:m}})),$=async(m,v={},R={blocks:!0,text:!0,hocr:!0,tsv:!0},I)=>C(e({id:I,action:"recognize",payload:{image:await O(m),options:v,output:R}})),rt=(m="Tesseract OCR Result",v=!1,R)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),C(e({id:R,action:"getPDF",payload:{title:m,textonly:v}}))),nt=async(m,v)=>{if(B)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return C(e({id:v,action:"detect",payload:{image:await O(m)}}))},at=async()=>(D!==null&&(g(D),D=null),Promise.resolve());E(D,({workerId:m,jobId:v,status:R,action:I,data:T})=>{const Y=`${I}-${v}`;if(R==="resolve"){c(`[${m}]: Complete ${v}`);let re=T;I==="recognize"?re=s(T):I==="getPDF"&&(re=Array.from({...T,length:Object.keys(T).length})),w[Y]({jobId:v,data:re})}else if(R==="reject")if(_[Y](T),I==="load"&&H(T),q)q(T);else throw Error(T);else R==="progress"&&L({...T,userJobId:v})});const ot={id:M,worker:D,setResolve:Z,setReject:Q,load:r,writeText:o,readText:h,removeFile:d,FS:x,loadLanguage:k,initialize:A,reinitialize:V,setParameters:J,recognize:$,getPDF:rt,detect:nt,terminate:at};return t().then(()=>S(P)).then(()=>j(P,F,N)).then(()=>ee(ot)).catch(()=>{}),te},Ne}var Ee,Ke;function kt(){if(Ke)return Ee;Ke=1;const l=tt();return Ee={recognize:async(c,i,n)=>{const u=await l(i,1,n);return u.recognize(c).finally(async()=>{await u.terminate()})},detect:async(c,i)=>{const n=await l("osd",0,i);return n.detect(c).finally(async()=>{await n.terminate()})}},Ee}var Le,Ze;function Ot(){return Ze||(Ze=1,Le={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Le}var je,Qe;function Tt(){return Qe||(Qe=1,je={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),je}var Se,Ve;function Ct(){if(Ve)return Se;Ve=1,dt();const l=ft(),s=tt(),e=kt(),c=Ot(),i=et(),n=Tt(),{setLogging:u}=ke();return Se={languages:c,OEM:i,PSM:n,createScheduler:l,createWorker:s,setLogging:u,...e},Se}var At=Ct();const It=lt(At);class Pt{constructor(){Oe(this,"worker",null)}async initialize(){this.worker||(this.worker=await It.createWorker("por",1,{logger:s=>console.log(s)}))}async terminate(){this.worker&&(await this.worker.terminate(),this.worker=null)}async recognizeText(s){if(await this.initialize(),!this.worker)throw new Error("Worker OCR não inicializado");const e=await this.worker.recognize(s);return{text:e.data.text,confidence:e.data.confidence,words:e.data.words.map(c=>({text:c.text,confidence:c.confidence,bbox:c.bbox}))}}async extractEquipmentCode(s){const c=(await this.recognizeText(s)).text.toUpperCase(),i=/EQ[P]?-\d{4}-\d{4}/g,n=c.match(i);return n?n[0]:null}async extractBarcode(s){const c=(await this.recognizeText(s)).text.replace(/\s/g,""),i=/\d{8,13}/g,n=c.match(i);return n?n[0]:null}async extractSerialNumber(s){const c=(await this.recognizeText(s)).text.toUpperCase(),n=/S[\/]?N[:\s]+([A-Z0-9-]+)/g.exec(c);return n?n[1]:null}async extractPlateInfo(s){const c=(await this.recognizeText(s)).text.split(`
`).map(n=>n.trim()),i={};for(const n of c){const u=n.toUpperCase();if(u.includes("EQUIPAMENTO")||u.includes("EQUIPMENT")){const f=n.match(/[A-Z]{2,3}-\d{4}-\d{4}/);f&&(i.equipmentCode=f[0])}if(u.includes("SERIAL")||u.includes("S/N")){const f=n.match(/[A-Z0-9-]{8,}/);f&&(i.serialNumber=f[0])}if(u.includes("FABRICANTE")||u.includes("MANUFACTURER")){const f=n.split(":");f.length>1&&(i.manufacturer=f[1].trim())}if(u.includes("MODELO")||u.includes("MODEL")){const f=n.split(":");f.length>1&&(i.model=f[1].trim())}if(u.includes("ANO")||u.includes("YEAR")){const f=n.match(/\d{4}/);f&&(i.year=f[0])}}return i}preprocessImage(s){const e=document.createElement("canvas"),c=e.getContext("2d");if(!c)throw new Error("Não foi possível criar contexto do canvas");e.width=s.width,e.height=s.height,c.drawImage(s,0,0);const i=c.getImageData(0,0,e.width,e.height),n=i.data;for(let g=0;g<n.length;g+=4){const E=(n[g]+n[g+1]+n[g+2])/3;n[g]=E,n[g+1]=E,n[g+2]=E}const u=50,f=259*(u+255)/(255*(259-u));for(let g=0;g<n.length;g+=4)n[g]=f*(n[g]-128)+128,n[g+1]=f*(n[g+1]-128)+128,n[g+2]=f*(n[g+2]-128)+128;return c.putImageData(i,0,0),e.toDataURL()}async captureFromCamera(){return new Promise((s,e)=>{const c=document.createElement("video"),i=document.createElement("canvas");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(n=>{c.srcObject=n,c.play(),c.addEventListener("loadedmetadata",()=>{i.width=c.videoWidth,i.height=c.videoHeight;const u=i.getContext("2d");if(!u){e(new Error("Não foi possível criar contexto do canvas"));return}u.drawImage(c,0,0),n.getTracks().forEach(f=>f.stop()),s(i.toDataURL())})}).catch(e)})}}const qt=new Pt;function Dt(){const{success:l,error:s}=ut(),[e,c]=K.useState(!1),[i,n]=K.useState(""),[u,f]=K.useState(null),[g,E]=K.useState("upload"),O=K.useRef(null),b=K.useRef(null),[G,P]=K.useState(null),F=p=>{var W;const w=(W=p.target.files)==null?void 0:W[0];if(!w)return;const _=new FileReader;_.onload=z=>{var B;const U=(B=z.target)==null?void 0:B.result;n(U),L(U)},_.readAsDataURL(w)},y=async()=>{try{const p=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});b.current&&(b.current.srcObject=p,P(p))}catch(p){s("Erro ao acessar câmera"),console.error(p)}},N=()=>{G&&(G.getTracks().forEach(p=>p.stop()),P(null))},M=()=>{if(!b.current)return;const p=document.createElement("canvas");p.width=b.current.videoWidth,p.height=b.current.videoHeight;const w=p.getContext("2d");if(!w)return;w.drawImage(b.current,0,0);const _=p.toDataURL();n(_),N(),L(_)},L=async p=>{c(!0);try{const w=await qt.extractPlateInfo(p);f(w),l("Placa processada com sucesso!")}catch(w){s("Erro ao processar imagem"),console.error(w)}finally{c(!1)}},q=()=>{n(""),f(null),N()};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[a.jsx("i",{className:"ri-qr-scan-2-line mr-3"}),"Leitor de Placas e Códigos"]}),a.jsx("p",{className:"text-slate-400",children:"Escaneie placas de identificação, códigos de barras e números de série"})]}),a.jsxs("div",{className:"flex gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>{E("upload"),N()},className:`flex-1 px-6 py-4 rounded-xl font-semibold transition-all whitespace-nowrap ${g==="upload"?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[a.jsx("i",{className:"ri-upload-2-line mr-2"}),"Upload de Imagem"]}),a.jsxs("button",{onClick:()=>{E("camera"),y()},className:`flex-1 px-6 py-4 rounded-xl font-semibold transition-all whitespace-nowrap ${g==="camera"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[a.jsx("i",{className:"ri-camera-line mr-2"}),"Usar Câmera"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:g==="upload"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-image-line mr-2"}),"Imagem"]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-camera-line mr-2"}),"Câmera"]})}),g==="upload"&&!i&&a.jsxs("div",{onClick:()=>{var p;return(p=O.current)==null?void 0:p.click()},className:"border-2 border-dashed border-slate-600 rounded-xl p-12 text-center cursor-pointer hover:border-blue-500 transition-all",children:[a.jsx("i",{className:"ri-upload-cloud-2-line text-6xl text-slate-500 mb-4"}),a.jsx("p",{className:"text-slate-400 mb-2",children:"Clique para fazer upload"}),a.jsx("p",{className:"text-sm text-slate-500",children:"PNG, JPG até 10MB"}),a.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:F,className:"hidden"})]}),g==="camera"&&!i&&a.jsxs("div",{className:"relative",children:[a.jsx("video",{ref:b,autoPlay:!0,playsInline:!0,className:"w-full rounded-xl bg-black"}),G&&a.jsx("button",{onClick:M,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-all",children:a.jsx("i",{className:"ri-camera-fill text-3xl text-slate-900"})})]}),i&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:i,alt:"Captura",className:"w-full rounded-xl"}),a.jsx("button",{onClick:q,className:"absolute top-4 right-4 w-10 h-10 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center text-white transition-all",children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),e&&a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("i",{className:"ri-loader-4-line animate-spin text-4xl text-blue-400 mb-4"}),a.jsx("p",{className:"text-slate-400",children:"Processando imagem..."})]})})]}),a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[a.jsx("i",{className:"ri-file-list-3-line mr-2"}),"Informações Extraídas"]}),!u&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx("i",{className:"ri-scan-2-line text-6xl text-slate-600 mb-4"}),a.jsx("p",{className:"text-slate-400",children:"Nenhuma informação extraída ainda"}),a.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Faça upload de uma imagem ou use a câmera"})]}),u&&a.jsxs("div",{className:"space-y-4",children:[u.equipmentCode&&a.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Código do Equipamento"}),a.jsx("div",{className:"text-xl font-bold text-green-400 font-mono",children:u.equipmentCode})]}),u.serialNumber&&a.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Número de Série"}),a.jsx("div",{className:"text-xl font-bold text-blue-400 font-mono",children:u.serialNumber})]}),u.manufacturer&&a.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Fabricante"}),a.jsx("div",{className:"text-lg font-semibold text-white",children:u.manufacturer})]}),u.model&&a.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Modelo"}),a.jsx("div",{className:"text-lg font-semibold text-white",children:u.model})]}),u.year&&a.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Ano"}),a.jsx("div",{className:"text-lg font-semibold text-white",children:u.year})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(u,null,2)),l("Informações copiadas!")},className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-all whitespace-nowrap",children:[a.jsx("i",{className:"ri-file-copy-line mr-2"}),"Copiar"]}),a.jsxs("button",{onClick:q,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-lg font-semibold transition-all whitespace-nowrap",children:[a.jsx("i",{className:"ri-refresh-line mr-2"}),"Nova Leitura"]})]})]})]})]}),a.jsxs("div",{className:"mt-8 bg-blue-500/10 border border-blue-500/30 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-3",children:[a.jsx("i",{className:"ri-lightbulb-line mr-2"}),"Dicas para Melhor Leitura"]}),a.jsxs("ul",{className:"space-y-2 text-slate-300",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("i",{className:"ri-checkbox-circle-fill text-blue-400 mt-1"}),a.jsx("span",{children:"Certifique-se de que a placa está bem iluminada"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("i",{className:"ri-checkbox-circle-fill text-blue-400 mt-1"}),a.jsx("span",{children:"Mantenha a câmera paralela à placa"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("i",{className:"ri-checkbox-circle-fill text-blue-400 mt-1"}),a.jsx("span",{children:"Evite reflexos e sombras"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("i",{className:"ri-checkbox-circle-fill text-blue-400 mt-1"}),a.jsx("span",{children:"Use imagens com boa resolução"})]})]})]})]})})}export{Dt as default};
//# sourceMappingURL=page-DIQwTTu-.js.map
