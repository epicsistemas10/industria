{"version":3,"file":"page-iR_o2JUQ.js","sources":["../../src/pages/dashboard-tv/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\n\ninterface Equipment {\n  id: string;\n  nome: string;\n  status: string;\n  progresso?: number;\n  setor?: string;\n  criticidade?: string;\n  imagem_url?: string;\n}\n\ninterface Hotspot {\n  id: string;\n  equipamento_id: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  color?: string;\n  fontSize?: number;\n  icon?: string;\n}\n\ninterface Stats {\n  equipamentosOperacionais: number;\n  equipamentosManutencao: number;\n  equipamentosParados: number;\n  equipamentosAlerta: number;\n  osAbertas: number;\n  osEmAndamento: number;\n  osConcluidas: number;\n  totalEquipamentos: number;\n}\n\ninterface Atividade {\n  id: string;\n  equipamento_nome: string;\n  tipo: string;\n  descricao: string;\n  data_inicio: string;\n  responsavel: string;\n  prioridade: string;\n}\n\ninterface Equipe {\n  id: string;\n  nome: string;\n  turno: string;\n  membros: string[];\n  equipamentos: string[];\n}\n\nexport default function DashboardTVPage() {\n  const [stats, setStats] = useState<Stats>({\n    equipamentosOperacionais: 0,\n    equipamentosManutencao: 0,\n    equipamentosParados: 0,\n    equipamentosAlerta: 0,\n    osAbertas: 0,\n    osEmAndamento: 0,\n    osConcluidas: 0,\n    totalEquipamentos: 0,\n  });\n  const [mapaUrl, setMapaUrl] = useState<string>('');\n  const [mapImage, setMapImage] = useState<string>('');\n  const [equipments, setEquipments] = useState<Equipment[]>([]);\n  const [hotspots, setHotspots] = useState<Hotspot[]>([]);\n  const [atividades, setAtividades] = useState<Atividade[]>([]);\n  const [equipes, setEquipes] = useState<Equipe[]>([]);\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [currentView, setCurrentView] = useState<'mapa' | 'planejamento'>('mapa');\n  const [companyLogo, setCompanyLogo] = useState<string | null>(null);\n  const [companyName, setCompanyName] = useState('');\n\n  useEffect(() => {\n    loadData();\n    \n    // Carregar logo e nome da empresa\n    const savedLogo = localStorage.getItem('company_logo');\n    const savedName = localStorage.getItem('company_name');\n    if (savedLogo) setCompanyLogo(savedLogo);\n    if (savedName) setCompanyName(savedName);\n    \n    // Carregar mapa industrial do localStorage (mesmo local que a p√°gina Mapa Industrial)\n    console.log('üîç Tentando carregar mapa do localStorage...');\n    const savedMapImage = localStorage.getItem('map_image');\n    console.log('üì¶ Valor encontrado no localStorage:', savedMapImage ? 'Imagem encontrada' : 'Nenhuma imagem');\n    \n    if (savedMapImage) {\n      console.log('‚úÖ Mapa carregado com sucesso!');\n      console.log('üìè Tamanho da imagem:', savedMapImage.length, 'caracteres');\n      setMapImage(savedMapImage);\n    } else {\n      console.log('‚ö†Ô∏è Nenhum mapa encontrado no localStorage');\n      console.log('üí° Dica: Fa√ßa upload do mapa em \"Mapa Industrial\" primeiro');\n    }\n    \n    const interval = setInterval(() => {\n      loadData();\n      setCurrentTime(new Date());\n      \n      // Recarregar mapa a cada 30 segundos\n      const updatedMapImage = localStorage.getItem('map_image');\n      if (updatedMapImage && updatedMapImage !== mapImage) {\n        console.log('üîÑ Mapa atualizado detectado');\n        setMapImage(updatedMapImage);\n      }\n    }, 30000);\n\n    const timeInterval = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n      clearInterval(timeInterval);\n    };\n  }, []);\n\n  useEffect(() => {\n    // carregar equipamentos e hotspots tamb√©m\n    loadEquipments();\n    loadHotspots();\n  }, []);\n\n  const loadEquipments = async () => {\n    try {\n      const { data: eqData, error: eqError } = await supabase\n        .from('equipamentos')\n        .select('*, setores(nome)');\n\n      if (!eqError && eqData) {\n        const mapped = eqData.map((item: any) => ({\n          id: item.id,\n          nome: item.nome || 'Sem nome',\n          status: item.status || 'parado',\n          progresso: item.status_revisao || 0,\n          setor: item.setores?.nome || 'Sem setor',\n          criticidade: item.criticidade,\n          imagem_url: item.imagem_url,\n        }));\n        setEquipments(mapped);\n      } else {\n        setEquipments([]);\n      }\n    } catch (err) {\n      console.error('Erro ao carregar equipamentos (TV):', err);\n      setEquipments([]);\n    }\n  };\n\n  const loadHotspots = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('equipamento_mapa')\n        .select('*');\n\n      if (!error && data) {\n        const hotspotsData = data.map((item: any) => ({\n          id: item.id,\n          equipamento_id: item.equipamento_id,\n          x: item.x || 10,\n          y: item.y || 10,\n          width: item.width || 8,\n          height: item.height || 8,\n          color: item.color || '#10b981',\n          fontSize: item.font_size || 14,\n          icon: item.icon || 'ri-tools-fill',\n        }));\n        setHotspots(hotspotsData);\n      }\n    } catch (err) {\n      console.error('Erro ao carregar hotspots (TV):', err);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'operacional': return '#10b981';\n      case 'manutencao': return '#f59e0b';\n      case 'parado': return '#ef4444';\n      case 'alerta': return '#eab308';\n      default: return '#6b7280';\n    }\n  };\n\n  const loadData = async () => {\n    try {\n      // Carregar estat√≠sticas de equipamentos\n      const { data: equipamentos } = await supabase\n        .from('equipamentos')\n        .select('status, criticidade, imagem_url');\n\n      if (equipamentos) {\n        const total = equipamentos.length;\n        const operacionais = equipamentos.filter(e => e.status === 'operacional').length;\n        const manutencao = equipamentos.filter(e => e.status === 'manutencao').length;\n        const parados = equipamentos.filter(e => e.status === 'parado').length;\n        const alerta = equipamentos.filter(e => e.status === 'alerta').length;\n\n        setStats(prev => ({\n          ...prev,\n          totalEquipamentos: total,\n          equipamentosOperacionais: operacionais,\n          equipamentosManutencao: manutencao,\n          equipamentosParados: parados,\n          equipamentosAlerta: alerta,\n        }));\n      }\n\n      // Carregar estat√≠sticas de OS\n      const { data: os } = await supabase\n        .from('ordens_servico')\n        .select('status, data_abertura');\n\n      if (os) {\n        const hoje = new Date();\n        hoje.setHours(0, 0, 0, 0);\n\n        const abertas = os.filter(o => o.status === 'aberta').length;\n        const emAndamento = os.filter(o => o.status === 'em_andamento').length;\n        const concluidasHoje = os.filter(o => {\n          if (o.status !== 'concluida') return false;\n          const dataOS = new Date(o.data_abertura);\n          return dataOS >= hoje;\n        }).length;\n\n        setStats(prev => ({\n          ...prev,\n          osAbertas: abertas,\n          osEmAndamento: emAndamento,\n          osConcluidas: concluidasHoje,\n        }));\n      }\n\n      // Carregar planejamento semanal\n      const { data: planejamento } = await supabase\n        .from('planejamento_semana')\n        .select('*, equipamentos(nome)')\n        .eq('semana', 0)\n        .order('data_inicio');\n\n      if (planejamento) {\n        setAtividades(planejamento.map(p => ({\n          id: p.id,\n          equipamento_nome: p.equipamentos?.nome || 'Sem equipamento',\n          tipo: p.tipo,\n          descricao: p.descricao,\n          data_inicio: p.data_inicio,\n          responsavel: p.responsavel,\n          prioridade: p.prioridade\n        })));\n      }\n\n      // Carregar equipes\n      const { data: equipesData } = await supabase\n        .from('equipes')\n        .select('*')\n        .eq('disponibilidade', true);\n\n      if (equipesData) {\n        setEquipes(equipesData.map(e => ({\n          id: e.id,\n          nome: e.nome,\n          turno: e.turno || 'Integral',\n          membros: e.membros || [],\n          equipamentos: [] // Ser√° preenchido com base no planejamento\n        })));\n      }\n    } catch (err) {\n      console.error('Erro ao carregar dados:', err);\n    }\n  };\n\n  const getPrioridadeColor = (prioridade: string) => {\n    switch (prioridade) {\n      case 'alta': return 'bg-red-500';\n      case 'media': return 'bg-yellow-500';\n      case 'baixa': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getTipoIcon = (tipo: string) => {\n    switch (tipo) {\n      case 'revisao': return 'ri-tools-line';\n      case 'manutencao': return 'ri-hammer-line';\n      case 'inspecao': return 'ri-search-eye-line';\n      case 'limpeza': return 'ri-brush-line';\n      default: return 'ri-file-list-line';\n    }\n  };\n\n  const diasSemana = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];\n\n  const disponibilidade = stats.totalEquipamentos > 0 \n    ? ((stats.equipamentosOperacionais / stats.totalEquipamentos) * 100).toFixed(1)\n    : '0.0';\n\n  const mediaRevisao = stats.totalEquipamentos > 0\n    ? (((stats.equipamentosOperacionais + stats.equipamentosManutencao) / stats.totalEquipamentos) * 100).toFixed(1)\n    : '0.0';\n\n  return (\n    <div className=\"min-h-screen w-full bg-gradient-to-br from-slate-900 via-blue-900 to-purple-900 p-4 md:p-6 lg:p-8\">\n      {/* Header Compacto */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-4\">\n          {companyLogo ? (\n            <img src={companyLogo} alt=\"Logo\" className=\"w-16 h-16 rounded-lg object-contain bg-white/10 p-2\" />\n          ) : (\n            <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-plant-line text-white text-3xl\"></i>\n            </div>\n          )}\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\">Dashboard Manuten√ß√£o</h1>\n            <p className=\"text-blue-200 text-base font-bold\">{companyName}</p>\n          </div>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-3xl font-bold text-white\">\n            {currentTime.toLocaleTimeString('pt-BR')}\n          </div>\n          <div className=\"text-blue-200 text-base\">\n            {currentTime.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' })}\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Compactos - Apenas M√©dia de Revis√£o */}\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 mb-4\">\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div className=\"text-center\">\n            <div className=\"text-4xl font-bold text-green-400 mb-1\">{mediaRevisao}%</div>\n            <div className=\"text-green-200 text-sm\">M√©dia de Revis√£o</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-4xl font-bold text-blue-400 mb-1\">{stats.equipamentosOperacionais}</div>\n            <div className=\"text-blue-200 text-sm\">Operacionais</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-4xl font-bold text-orange-400 mb-1\">{stats.equipamentosManutencao}</div>\n            <div className=\"text-orange-200 text-sm\">Em Manuten√ß√£o</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-4xl font-bold text-purple-400 mb-1\">{stats.totalEquipamentos}</div>\n            <div className=\"text-purple-200 text-sm\">Total</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Grid: Mapa + Planejamento na mesma tela */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        {/* Mapa Industrial */}\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n          <h3 className=\"text-lg font-bold text-white mb-3 flex items-center gap-2\">\n            <i className=\"ri-map-pin-line text-blue-400\"></i>\n            Mapa Industrial\n          </h3>\n          {mapImage ? (\n            <div className=\"relative w-full h-[400px] lg:h-[500px] rounded-lg overflow-hidden bg-slate-800/50\">\n              <img\n                src={mapImage}\n                alt=\"Mapa Industrial\"\n                className=\"w-full h-full object-cover pointer-events-none\"\n                onError={(e) => {\n                  console.error('‚ùå Erro ao carregar imagem do mapa');\n                  setMapImage('');\n                }}\n                onLoad={() => {\n                  console.log('‚úÖ Imagem do mapa carregada com sucesso no Dashboard TV');\n                }}\n              />\n              {/* Hotspots overlay (apenas visualiza√ß√£o) */}\n              {hotspots.length > 0 && equipments.length > 0 && (\n                <div className=\"absolute inset-0 pointer-events-none\">\n                  {hotspots.map((hotspot) => {\n                    const equipment = equipments.find(eq => eq.id === hotspot.equipamento_id);\n                    if (!equipment) return null;\n\n                    const hotspotColor = hotspot.color || getStatusColor(equipment.status);\n                    const fontSize = hotspot.fontSize || 14;\n                    const iconClass = hotspot.icon || 'ri-tools-fill';\n                    const circleSize = fontSize * 4;\n\n                    return (\n                      <div\n                        key={hotspot.id}\n                        className=\"absolute\"\n                        style={{\n                          left: `${hotspot.x}%`,\n                          top: `${hotspot.y}%`,\n                          width: `${hotspot.width}%`,\n                          height: `${hotspot.height}%`,\n                          transform: 'translate(-50%, -50%)',\n                        }}\n                      >\n                        <div\n                          className=\"rounded-full flex flex-col items-center justify-center shadow-lg\"\n                          style={{\n                            backgroundColor: hotspotColor,\n                            width: `${circleSize}px`,\n                            height: `${circleSize}px`,\n                          }}\n                        >\n                          <i className={`${iconClass} text-white mb-1`} style={{ fontSize: `${fontSize + 4}px` }}></i>\n                          <span className=\"text-white font-bold\" style={{ fontSize: `${fontSize - 2}px` }}>\n                            {equipment.progresso}%\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center h-[400px] lg:h-[500px] bg-slate-800/50 rounded-lg\">\n              <div className=\"text-center\">\n                <i className=\"ri-map-pin-line text-5xl text-gray-500 mb-3\"></i>\n                <p className=\"text-gray-400 text-sm font-medium\">Nenhum mapa dispon√≠vel</p>\n                <p className=\"text-gray-500 text-xs mt-2\">Fa√ßa upload do mapa em \"Mapa Industrial\"</p>\n                <button\n                  onClick={() => {\n                    console.log('üîÑ Tentando recarregar mapa...');\n                    const reloadedMap = localStorage.getItem('map_image');\n                    if (reloadedMap) {\n                      console.log('‚úÖ Mapa encontrado! Carregando...');\n                      setMapImage(reloadedMap);\n                    } else {\n                      console.log('‚ùå Ainda n√£o h√° mapa no localStorage');\n                      alert('Nenhum mapa encontrado. Por favor, fa√ßa upload em \"Mapa Industrial\"');\n                    }\n                  }}\n                  className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer text-sm\"\n                >\n                  <i className=\"ri-refresh-line mr-2\"></i>\n                  Tentar Recarregar\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Planejamento Semanal */}\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n          <h3 className=\"text-lg font-bold text-white mb-3 flex items-center gap-2\">\n            <i className=\"ri-calendar-line text-blue-400\"></i>\n            Planejamento Semanal\n          </h3>\n          \n          <div className=\"space-y-3 max-h-[400px] lg:max-h-[500px] overflow-y-auto pr-2\">\n            {diasSemana.map((dia, index) => {\n              const atividadesDia = atividades.filter(a => {\n                const dataAtividade = new Date(a.data_inicio);\n                return dataAtividade.getDay() === index + 1;\n              });\n\n              return (\n                <div key={dia} className=\"bg-white/5 rounded-lg p-3 border border-white/10\">\n                  <h4 className=\"text-sm font-bold text-white mb-2 flex items-center gap-2\">\n                    <i className=\"ri-calendar-check-line text-blue-400\"></i>\n                    {dia}\n                    <span className=\"ml-auto text-xs bg-blue-500/30 px-2 py-1 rounded-full\">\n                      {atividadesDia.length} atividades\n                    </span>\n                  </h4>\n                  {atividadesDia.length > 0 ? (\n                    <div className=\"space-y-2\">\n                      {atividadesDia.slice(0, 3).map(ativ => (\n                        <div key={ativ.id} className=\"bg-white/5 rounded p-2 border border-white/10\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <i className={`${getTipoIcon(ativ.tipo)} text-blue-400 text-sm`}></i>\n                            <span className=\"text-xs text-white font-medium truncate flex-1\">{ativ.equipamento_nome}</span>\n                            <span className={`px-2 py-0.5 rounded text-xs ${getPrioridadeColor(ativ.prioridade)} text-white`}>\n                              {ativ.prioridade}\n                            </span>\n                          </div>\n                          <p className=\"text-xs text-blue-200 truncate ml-5\">{ativ.descricao}</p>\n                        </div>\n                      ))}\n                      {atividadesDia.length > 3 && (\n                        <p className=\"text-xs text-gray-400 text-center\">\n                          +{atividadesDia.length - 3} atividades\n                        </p>\n                      )}\n                    </div>\n                  ) : (\n                    <p className=\"text-xs text-gray-400 ml-5\">Sem atividades planejadas</p>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["DashboardTVPage","stats","setStats","useState","mapaUrl","setMapaUrl","mapImage","setMapImage","equipments","setEquipments","hotspots","setHotspots","atividades","setAtividades","equipes","setEquipes","currentTime","setCurrentTime","currentView","setCurrentView","companyLogo","setCompanyLogo","companyName","setCompanyName","useEffect","loadData","savedLogo","savedName","savedMapImage","interval","updatedMapImage","timeInterval","loadEquipments","loadHotspots","eqData","eqError","supabase","mapped","item","_a","err","data","error","hotspotsData","getStatusColor","status","equipamentos","total","operacionais","e","manutencao","parados","alerta","prev","os","hoje","abertas","o","emAndamento","concluidasHoje","planejamento","p","equipesData","getPrioridadeColor","prioridade","getTipoIcon","tipo","diasSemana","mediaRevisao","jsxs","jsx","hotspot","equipment","eq","hotspotColor","fontSize","iconClass","circleSize","reloadedMap","dia","index","atividadesDia","a","ativ"],"mappings":"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"}